import{z as $e,w as Y,r as I,u as Be,A as st,B as Ae,C as $t,s as te,a as ve,l as ae,D as Ye,c as R,E as ct,k as ge,G as At,d as W,i as d,H as ie,o as De,T as ut,I as dt,f as Ce,v as ke,F as Dt,J as Rt,K as pt}from"./index-C5bb5ypq.js";function _t(){}const Q=Object.assign,Ne=typeof window<"u",Ue=e=>e!==null&&typeof e=="object",ne=e=>e!=null,ze=e=>typeof e=="function",ft=e=>Ue(e)&&ze(e.then)&&ze(e.catch),vt=e=>typeof e=="number"||/^\d+(\.\d+)?$/.test(e),Lt=()=>Ne?/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase()):!1;function He(e,t){const o=t.split(".");let n=e;return o.forEach(i=>{var a;n=Ue(n)&&(a=n[i])!=null?a:""}),n}function ye(e,t,o){return t.reduce((n,i)=>((!o||e[i]!==void 0)&&(n[i]=e[i]),n),{})}const gt=e=>Array.isArray(e)?e:[e],Te=null,p=[Number,String],z={type:Boolean,default:!0},we=e=>({type:e,required:!0}),mt=()=>({type:Array,default:()=>[]}),ee=e=>({type:p,default:e}),_=e=>({type:String,default:e});var Se=typeof window<"u";function Fe(e){return Se?requestAnimationFrame(e):-1}function xe(e){Fe(()=>Fe(e))}var Ft=e=>e===window,We=(e,t)=>({top:0,left:0,right:e,bottom:t,width:e,height:t}),ht=e=>{const t=Be(e);if(Ft(t)){const o=t.innerWidth,n=t.innerHeight;return We(o,n)}return t!=null&&t.getBoundingClientRect?t.getBoundingClientRect():We(0,0)};function Mt(e){const t=$e(e,null);if(t){const o=ge(),{link:n,unlink:i,internalChildren:a}=t;n(o),st(()=>i(o));const s=R(()=>a.indexOf(o));return{parent:t,index:s}}return{parent:null,index:I(-1)}}function Yt(e){const t=[],o=n=>{Array.isArray(n)&&n.forEach(i=>{var a;At(i)&&(t.push(i),(a=i.component)!=null&&a.subTree&&(t.push(i.component.subTree),o(i.component.subTree.children)),i.children&&o(i.children))})};return o(e),t}var Ke=(e,t)=>{const o=e.indexOf(t);return o===-1?e.findIndex(n=>t.key!==void 0&&t.key!==null&&n.type===t.type&&n.key===t.key):o};function Nt(e,t,o){const n=Yt(e.subTree.children);o.sort((a,s)=>Ke(n,a.vnode)-Ke(n,s.vnode));const i=o.map(a=>a.proxy);t.sort((a,s)=>{const r=i.indexOf(a),f=i.indexOf(s);return r-f})}function Ut(e){const t=te([]),o=te([]),n=ge();return{children:t,linkChildren:a=>{ct(e,Object.assign({link:f=>{f.proxy&&(o.push(f),t.push(f.proxy),Nt(n,t,o))},unlink:f=>{const c=o.indexOf(f);t.splice(c,1),o.splice(c,1)},children:t,internalChildren:o},a))}}}function yt(e){let t;ve(()=>{e(),ae(()=>{t=!0})}),Ye(()=>{t&&e()})}function Re(e,t,o={}){if(!Se)return;const{target:n=window,passive:i=!1,capture:a=!1}=o;let s=!1,r;const f=u=>{if(s)return;const g=Be(u);g&&!r&&(g.addEventListener(e,t,{capture:a,passive:i}),r=!0)},c=u=>{if(s)return;const g=Be(u);g&&r&&(g.removeEventListener(e,t,a),r=!1)};st(()=>c(n)),Ae(()=>c(n)),yt(()=>f(n));let l;return $t(n)&&(l=Y(n,(u,g)=>{c(g),f(u)})),()=>{l==null||l(),c(n),s=!0}}var Ee,_e;function Xt(){if(!Ee&&(Ee=I(0),_e=I(0),Se)){const e=()=>{Ee.value=window.innerWidth,_e.value=window.innerHeight};e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("orientationchange",e,{passive:!0})}return{width:Ee,height:_e}}var jt=/scroll|auto|overlay/i,Vt=Se?window:void 0;function Zt(e){return e.tagName!=="HTML"&&e.tagName!=="BODY"&&e.nodeType===1}function Ht(e,t=Vt){let o=e;for(;o&&o!==t&&Zt(o);){const{overflowY:n}=window.getComputedStyle(o);if(jt.test(n))return o;o=o.parentNode}return t}var Ie;function Wt(){if(!Ie&&(Ie=I("visible"),Se)){const e=()=>{Ie.value=document.hidden?"hidden":"visible"};e(),window.addEventListener("visibilitychange",e)}return Ie}var Kt=Symbol("van-field");function Gt(e){const t=$e(Kt,null);t&&!t.customValue.value&&(t.customValue.value=e,Y(e,()=>{t.resetValidation(),t.validateWithTrigger("onChange")}))}Lt();const qt=e=>e.stopPropagation();function se(e,t){(typeof e.cancelable!="boolean"||e.cancelable)&&e.preventDefault(),t&&qt(e)}function Ge(e){const t=Be(e);if(!t)return!1;const o=window.getComputedStyle(t),n=o.display==="none",i=t.offsetParent===null&&o.position!=="fixed";return n||i}const{width:wt,height:bt}=Xt();function j(e){if(ne(e))return vt(e)?`${e}px`:String(e)}function Xe(e){if(ne(e)){if(Array.isArray(e))return{width:j(e[0]),height:j(e[1])};const t=j(e);return{width:t,height:t}}}function Jt(e){const t={};return e!==void 0&&(t.zIndex=+e),t}const Qt=/-(\w)/g,Ct=e=>e.replace(Qt,(t,o)=>o.toUpperCase()),J=(e,t,o)=>Math.min(Math.max(e,t),o),{hasOwnProperty:en}=Object.prototype;function tn(e,t,o){const n=t[o];ne(n)&&(!en.call(e,o)||!Ue(n)?e[o]=n:e[o]=St(Object(e[o]),n))}function St(e,t){return Object.keys(t).forEach(o=>{tn(e,t,o)}),e}var nn={name:"姓名",tel:"电话",save:"保存",clear:"清空",cancel:"取消",confirm:"确认",delete:"删除",loading:"加载中...",noCoupon:"暂无优惠券",nameEmpty:"请填写姓名",addContact:"添加联系人",telInvalid:"请填写正确的电话",vanCalendar:{end:"结束",start:"开始",title:"日期选择",weekdays:["日","一","二","三","四","五","六"],monthTitle:(e,t)=>`${e}年${t}月`,rangePrompt:e=>`最多选择 ${e} 天`},vanCascader:{select:"请选择"},vanPagination:{prev:"上一页",next:"下一页"},vanPullRefresh:{pulling:"下拉即可刷新...",loosing:"释放即可刷新..."},vanSubmitBar:{label:"合计:"},vanCoupon:{unlimited:"无门槛",discount:e=>`${e}折`,condition:e=>`满${e}元可用`},vanCouponCell:{title:"优惠券",count:e=>`${e}张可用`},vanCouponList:{exchange:"兑换",close:"不使用",enable:"可用",disabled:"不可用",placeholder:"输入优惠码"},vanAddressEdit:{area:"地区",areaEmpty:"请选择地区",addressEmpty:"请填写详细地址",addressDetail:"详细地址",defaultAddress:"设为默认收货地址"},vanAddressList:{add:"新增地址"}};const qe=I("zh-CN"),Je=te({"zh-CN":nn}),on={messages(){return Je[qe.value]},use(e,t){qe.value=e,this.add({[e]:t})},add(e={}){St(Je,e)}};var an=on;function ln(e){const t=Ct(e)+".";return(o,...n)=>{const i=an.messages(),a=He(i,t+o)||He(i,o);return ze(a)?a(...n):a}}function Me(e,t){return t?typeof t=="string"?` ${e}--${t}`:Array.isArray(t)?t.reduce((o,n)=>o+Me(e,n),""):Object.keys(t).reduce((o,n)=>o+(t[n]?Me(e,n):""),""):""}function rn(e){return(t,o)=>(t&&typeof t!="string"&&(o=t,t=""),t=t?`${e}__${t}`:e,`${t}${Me(t,o)}`)}function K(e){const t=`van-${e}`;return[t,rn(t),ln(t)]}const sn="van-hairline",cn=`${sn}--surround`,xt="van-haptics-feedback",un=500,Qe=5;function je(e,{args:t=[],done:o,canceled:n,error:i}){if(e){const a=e.apply(null,t);ft(a)?a.then(s=>{s?o():n&&n()}).catch(i||_t):a?o():n&&n()}else o()}function q(e){return e.install=t=>{const{name:o}=e;o&&(t.component(o,e),t.component(Ct(`-${o}`),e))},e}const Et=Symbol();function dn(e){const t=$e(Et,null);t&&Y(t,o=>{o&&e()})}function ce(e){const t=ge();t&&Q(t.proxy,e)}const fn={to:[String,Object],url:String,replace:Boolean};function vn({to:e,url:t,replace:o,$router:n}){e&&n?n[o?"replace":"push"](e):t&&(o?location.replace(t):location.href=t)}function gn(){const e=ge().proxy;return()=>vn(e)}const[mn,et]=K("badge"),hn={dot:Boolean,max:p,tag:_("div"),color:String,offset:Array,content:p,showZero:z,position:_("top-right")};var yn=W({name:mn,props:hn,setup(e,{slots:t}){const o=()=>{if(t.content)return!0;const{content:r,showZero:f}=e;return ne(r)&&r!==""&&(f||r!==0&&r!=="0")},n=()=>{const{dot:r,max:f,content:c}=e;if(!r&&o())return t.content?t.content():ne(f)&&vt(c)&&+c>+f?`${f}+`:c},i=r=>r.startsWith("-")?r.replace("-",""):`-${r}`,a=R(()=>{const r={background:e.color};if(e.offset){const[f,c]=e.offset,{position:l}=e,[u,g]=l.split("-");t.default?(typeof c=="number"?r[u]=j(u==="top"?c:-c):r[u]=u==="top"?j(c):i(c),typeof f=="number"?r[g]=j(g==="left"?f:-f):r[g]=g==="left"?j(f):i(f)):(r.marginTop=j(c),r.marginLeft=j(f))}return r}),s=()=>{if(o()||e.dot)return d("div",{class:et([e.position,{dot:e.dot,fixed:!!t.default}]),style:a.value},[n()])};return()=>{if(t.default){const{tag:r}=e;return d(r,{class:et("wrapper")},{default:()=>[t.default(),s()]})}return s()}}});const wn=q(yn);let bn=2e3;const Cn=()=>++bn,[Sn,Io]=K("config-provider"),xn=Symbol(Sn),[En,tt]=K("icon"),In=e=>e==null?void 0:e.includes("/"),Pn={dot:Boolean,tag:_("i"),name:String,size:p,badge:p,color:String,badgeProps:Object,classPrefix:String};var On=W({name:En,props:Pn,setup(e,{slots:t}){const o=$e(xn,null),n=R(()=>e.classPrefix||(o==null?void 0:o.iconPrefix)||tt());return()=>{const{tag:i,dot:a,name:s,size:r,badge:f,color:c}=e,l=In(s);return d(wn,ie({dot:a,tag:i,class:[n.value,l?"":`${n.value}-${s}`],style:{color:c,fontSize:j(r)},content:f},e.badgeProps),{default:()=>{var u;return[(u=t.default)==null?void 0:u.call(t),l&&d("img",{class:tt("image"),src:s},null)]}})}}});const oe=q(On),[Bn,be]=K("loading"),kn=Array(12).fill(null).map((e,t)=>d("i",{class:be("line",String(t+1))},null)),zn=d("svg",{class:be("circular"),viewBox:"25 25 50 50"},[d("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),Tn={size:p,type:_("circular"),color:String,vertical:Boolean,textSize:p,textColor:String};var $n=W({name:Bn,props:Tn,setup(e,{slots:t}){const o=R(()=>Q({color:e.color},Xe(e.size))),n=()=>{const a=e.type==="spinner"?kn:zn;return d("span",{class:be("spinner",e.type),style:o.value},[t.icon?t.icon():a])},i=()=>{var a;if(t.default)return d("span",{class:be("text"),style:{fontSize:j(e.textSize),color:(a=e.textColor)!=null?a:e.color}},[t.default()])};return()=>{const{type:a,vertical:s}=e;return d("div",{class:be([a,{vertical:s}]),"aria-live":"polite","aria-busy":!0},[n(),i()])}}});const Ve=q($n),[An,ue]=K("button"),Dn=Q({},fn,{tag:_("button"),text:String,icon:String,type:_("default"),size:_("normal"),color:String,block:Boolean,plain:Boolean,round:Boolean,square:Boolean,loading:Boolean,hairline:Boolean,disabled:Boolean,iconPrefix:String,nativeType:_("button"),loadingSize:p,loadingText:String,loadingType:String,iconPosition:_("left")});var Rn=W({name:An,props:Dn,emits:["click"],setup(e,{emit:t,slots:o}){const n=gn(),i=()=>o.loading?o.loading():d(Ve,{size:e.loadingSize,type:e.loadingType,class:ue("loading")},null),a=()=>{if(e.loading)return i();if(o.icon)return d("div",{class:ue("icon")},[o.icon()]);if(e.icon)return d(oe,{name:e.icon,class:ue("icon"),classPrefix:e.iconPrefix},null)},s=()=>{let c;if(e.loading?c=e.loadingText:c=o.default?o.default():e.text,c)return d("span",{class:ue("text")},[c])},r=()=>{const{color:c,plain:l}=e;if(c){const u={color:l?c:"white"};return l||(u.background=c),c.includes("gradient")?u.border=0:u.borderColor=c,u}},f=c=>{e.loading?se(c):e.disabled||(t("click",c),n())};return()=>{const{tag:c,type:l,size:u,block:g,round:w,plain:x,square:$,loading:m,disabled:A,hairline:L,nativeType:S,iconPosition:F}=e,O=[ue([l,u,{plain:x,block:g,round:w,square:$,loading:m,disabled:A,hairline:L}]),{[cn]:L}];return d(c,{type:S,class:O,style:r(),disabled:A,onClick:f},{default:()=>[d("div",{class:ue("content")},[F==="left"&&a(),s(),F==="right"&&a()])]})}}});const Po=q(Rn),pn={show:Boolean,zIndex:p,overlay:z,duration:p,teleport:[String,Object],lockScroll:z,lazyRender:z,beforeClose:Function,overlayStyle:Object,overlayClass:Te,transitionAppear:Boolean,closeOnClickOverlay:z};function _n(e,t){return e>t?"horizontal":t>e?"vertical":""}function Ze(){const e=I(0),t=I(0),o=I(0),n=I(0),i=I(0),a=I(0),s=I(""),r=I(!0),f=()=>s.value==="vertical",c=()=>s.value==="horizontal",l=()=>{o.value=0,n.value=0,i.value=0,a.value=0,s.value="",r.value=!0};return{move:w=>{const x=w.touches[0];o.value=(x.clientX<0?0:x.clientX)-e.value,n.value=x.clientY-t.value,i.value=Math.abs(o.value),a.value=Math.abs(n.value);const $=10;(!s.value||i.value<$&&a.value<$)&&(s.value=_n(i.value,a.value)),r.value&&(i.value>Qe||a.value>Qe)&&(r.value=!1)},start:w=>{l(),e.value=w.touches[0].clientX,t.value=w.touches[0].clientY},reset:l,startX:e,startY:t,deltaX:o,deltaY:n,offsetX:i,offsetY:a,direction:s,isVertical:f,isHorizontal:c,isTap:r}}let he=0;const nt="van-overflow-hidden";function Ln(e,t){const o=Ze(),n="01",i="10",a=l=>{o.move(l);const u=o.deltaY.value>0?i:n,g=Ht(l.target,e.value),{scrollHeight:w,offsetHeight:x,scrollTop:$}=g;let m="11";$===0?m=x>=w?"00":"01":$+x>=w&&(m="10"),m!=="11"&&o.isVertical()&&!(parseInt(m,2)&parseInt(u,2))&&se(l,!0)},s=()=>{document.addEventListener("touchstart",o.start),document.addEventListener("touchmove",a,{passive:!1}),he||document.body.classList.add(nt),he++},r=()=>{he&&(document.removeEventListener("touchstart",o.start),document.removeEventListener("touchmove",a),he--,he||document.body.classList.remove(nt))},f=()=>t()&&s(),c=()=>t()&&r();yt(f),Ae(c),De(c),Y(t,l=>{l?s():r()})}function It(e){const t=I(!1);return Y(e,o=>{o&&(t.value=o)},{immediate:!0}),o=>()=>t.value?o():null}const ot=()=>{var e;const{scopeId:t}=((e=ge())==null?void 0:e.vnode)||{};return t?{[t]:""}:null},[Fn,Mn]=K("overlay"),Yn={show:Boolean,zIndex:p,duration:p,className:Te,lockScroll:z,lazyRender:z,customStyle:Object,teleport:[String,Object]};var Nn=W({name:Fn,props:Yn,setup(e,{slots:t}){const o=I(),n=It(()=>e.show||!e.lazyRender),i=s=>{e.lockScroll&&se(s,!0)},a=n(()=>{var s;const r=Q(Jt(e.zIndex),e.customStyle);return ne(e.duration)&&(r.animationDuration=`${e.duration}s`),Ce(d("div",{ref:o,style:r,class:[Mn(),e.className]},[(s=t.default)==null?void 0:s.call(t)]),[[ke,e.show]])});return Re("touchmove",i,{target:o}),()=>{const s=d(ut,{name:"van-fade",appear:!0},{default:a});return e.teleport?d(dt,{to:e.teleport},{default:()=>[s]}):s}}});const Un=q(Nn),Xn=Q({},pn,{round:Boolean,position:_("center"),closeIcon:_("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:_("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[jn,at]=K("popup");var Vn=W({name:jn,inheritAttrs:!1,props:Xn,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:o,slots:n}){let i,a;const s=I(),r=I(),f=It(()=>e.show||!e.lazyRender),c=R(()=>{const P={zIndex:s.value};if(ne(e.duration)){const X=e.position==="center"?"animationDuration":"transitionDuration";P[X]=`${e.duration}s`}return P}),l=()=>{i||(i=!0,s.value=e.zIndex!==void 0?+e.zIndex:Cn(),t("open"))},u=()=>{i&&je(e.beforeClose,{done(){i=!1,t("close"),t("update:show",!1)}})},g=P=>{t("clickOverlay",P),e.closeOnClickOverlay&&u()},w=()=>{if(e.overlay)return d(Un,ie({show:e.show,class:e.overlayClass,zIndex:s.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0},ot(),{onClick:g}),{default:n["overlay-content"]})},x=P=>{t("clickCloseIcon",P),u()},$=()=>{if(e.closeable)return d(oe,{role:"button",tabindex:0,name:e.closeIcon,class:[at("close-icon",e.closeIconPosition),xt],classPrefix:e.iconPrefix,onClick:x},null)};let m;const A=()=>{m&&clearTimeout(m),m=setTimeout(()=>{t("opened")})},L=()=>t("closed"),S=P=>t("keydown",P),F=f(()=>{var P;const{round:X,position:v,safeAreaInsetTop:C,safeAreaInsetBottom:T}=e;return Ce(d("div",ie({ref:r,style:c.value,role:"dialog",tabindex:0,class:[at({round:X,[v]:v}),{"van-safe-area-top":C,"van-safe-area-bottom":T}],onKeydown:S},o,ot()),[(P=n.default)==null?void 0:P.call(n),$()]),[[ke,e.show]])}),O=()=>{const{position:P,transition:X,transitionAppear:v}=e,C=P==="center"?"van-fade":`van-popup-slide-${P}`;return d(ut,{name:X||C,appear:v,onAfterEnter:A,onAfterLeave:L},{default:F})};return Y(()=>e.show,P=>{P&&!i&&(l(),o.tabindex===0&&ae(()=>{var X;(X=r.value)==null||X.focus()})),!P&&i&&(i=!1,t("close"))}),ce({popupRef:r}),Ln(r,()=>e.show&&e.lockScroll),Re("popstate",()=>{e.closeOnPopstate&&(u(),a=!1)}),ve(()=>{e.show&&l()}),Ye(()=>{a&&(t("update:show",!0),a=!1)}),Ae(()=>{e.show&&e.teleport&&(u(),a=!0)}),ct(Et,()=>e.show),()=>e.teleport?d(dt,{to:e.teleport},{default:()=>[w(),O()]}):d(Dt,null,[w(),O()])}});const Zn=q(Vn),[Pt,Pe]=K("swipe"),Hn={loop:z,width:p,height:p,vertical:Boolean,autoplay:ee(0),duration:ee(500),touchable:z,lazyRender:Boolean,initialSwipe:ee(0),indicatorColor:String,showIndicators:z,stopPropagation:z},Ot=Symbol(Pt);var Wn=W({name:Pt,props:Hn,emits:["change","dragStart","dragEnd"],setup(e,{emit:t,slots:o}){const n=I(),i=I(),a=te({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let s=!1;const r=Ze(),{children:f,linkChildren:c}=Ut(Ot),l=R(()=>f.length),u=R(()=>a[e.vertical?"height":"width"]),g=R(()=>e.vertical?r.deltaY.value:r.deltaX.value),w=R(()=>a.rect?(e.vertical?a.rect.height:a.rect.width)-u.value*l.value:0),x=R(()=>u.value?Math.ceil(Math.abs(w.value)/u.value):l.value),$=R(()=>l.value*u.value),m=R(()=>(a.active+l.value)%l.value),A=R(()=>{const y=e.vertical?"vertical":"horizontal";return r.direction.value===y}),L=R(()=>{const y={transitionDuration:`${a.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${+a.offset.toFixed(2)}px)`};if(u.value){const k=e.vertical?"height":"width",D=e.vertical?"width":"height";y[k]=`${$.value}px`,y[D]=e[D]?`${e[D]}px`:""}return y}),S=y=>{const{active:k}=a;return y?e.loop?J(k+y,-1,l.value):J(k+y,0,x.value):k},F=(y,k=0)=>{let D=y*u.value;e.loop||(D=Math.min(D,-w.value));let G=k-D;return e.loop||(G=J(G,w.value,0)),G},O=({pace:y=0,offset:k=0,emitChange:D})=>{if(l.value<=1)return;const{active:G}=a,H=S(y),me=F(H,k);if(e.loop){if(f[0]&&me!==w.value){const pe=me<w.value;f[0].setOffset(pe?$.value:0)}if(f[l.value-1]&&me!==0){const pe=me>0;f[l.value-1].setOffset(pe?-$.value:0)}}a.active=H,a.offset=me,D&&H!==G&&t("change",m.value)},P=()=>{a.swiping=!0,a.active<=-1?O({pace:l.value}):a.active>=l.value&&O({pace:-l.value})},X=()=>{P(),r.reset(),xe(()=>{a.swiping=!1,O({pace:-1,emitChange:!0})})},v=()=>{P(),r.reset(),xe(()=>{a.swiping=!1,O({pace:1,emitChange:!0})})};let C;const T=()=>clearTimeout(C),B=()=>{T(),+e.autoplay>0&&l.value>1&&(C=setTimeout(()=>{v(),B()},+e.autoplay))},N=(y=+e.initialSwipe)=>{if(!n.value)return;const k=()=>{var D,G;if(!Ge(n)){const H={width:n.value.offsetWidth,height:n.value.offsetHeight};a.rect=H,a.width=+((D=e.width)!=null?D:H.width),a.height=+((G=e.height)!=null?G:H.height)}l.value&&(y=Math.min(l.value-1,y),y===-1&&(y=l.value-1)),a.active=y,a.swiping=!0,a.offset=F(y),f.forEach(H=>{H.setOffset(0)}),B()};Ge(n)?ae().then(k):k()},V=()=>N(a.active);let le;const re=y=>{!e.touchable||y.touches.length>1||(r.start(y),s=!1,le=Date.now(),T(),P())},h=y=>{e.touchable&&a.swiping&&(r.move(y),A.value&&(!e.loop&&(a.active===0&&g.value>0||a.active===l.value-1&&g.value<0)||(se(y,e.stopPropagation),O({offset:g.value}),s||(t("dragStart",{index:m.value}),s=!0))))},b=()=>{if(!e.touchable||!a.swiping)return;const y=Date.now()-le,k=g.value/y;if((Math.abs(k)>.25||Math.abs(g.value)>u.value/2)&&A.value){const G=e.vertical?r.offsetY.value:r.offsetX.value;let H=0;e.loop?H=G>0?g.value>0?-1:1:0:H=-Math[g.value>0?"ceil":"floor"](g.value/u.value),O({pace:H,emitChange:!0})}else g.value&&O({pace:0});s=!1,a.swiping=!1,t("dragEnd",{index:m.value}),B()},E=(y,k={})=>{P(),r.reset(),xe(()=>{let D;e.loop&&y===l.value?D=a.active===0?0:y:D=y%l.value,k.immediate?xe(()=>{a.swiping=!1}):a.swiping=!1,O({pace:D-a.active,emitChange:!0})})},U=(y,k)=>{const D=k===m.value,G=D?{backgroundColor:e.indicatorColor}:void 0;return d("i",{style:G,class:Pe("indicator",{active:D})},null)},Z=()=>{if(o.indicator)return o.indicator({active:m.value,total:l.value});if(e.showIndicators&&l.value>1)return d("div",{class:Pe("indicators",{vertical:e.vertical})},[Array(l.value).fill("").map(U)])};return ce({prev:X,next:v,state:a,resize:V,swipeTo:E}),c({size:u,props:e,count:l,activeIndicator:m}),Y(()=>e.initialSwipe,y=>N(+y)),Y(l,()=>N(a.active)),Y(()=>e.autoplay,B),Y([wt,bt,()=>e.width,()=>e.height],V),Y(Wt(),y=>{y==="visible"?B():T()}),ve(N),Ye(()=>N(a.active)),dn(()=>N(a.active)),Ae(T),De(T),Re("touchmove",h,{target:i}),()=>{var y;return d("div",{ref:n,class:Pe()},[d("div",{ref:i,style:L.value,class:Pe("track",{vertical:e.vertical}),onTouchstartPassive:re,onTouchend:b,onTouchcancel:b},[(y=o.default)==null?void 0:y.call(o)]),Z()])}}});const Kn=q(Wn),[Gn,qn]=K("swipe-item");var Jn=W({name:Gn,setup(e,{slots:t}){let o;const n=te({offset:0,inited:!1,mounted:!1}),{parent:i,index:a}=Mt(Ot);if(!i)return;const s=R(()=>{const c={},{vertical:l}=i.props;return i.size.value&&(c[l?"height":"width"]=`${i.size.value}px`),n.offset&&(c.transform=`translate${l?"Y":"X"}(${n.offset}px)`),c}),r=R(()=>{const{loop:c,lazyRender:l}=i.props;if(!l||o)return!0;if(!n.mounted)return!1;const u=i.activeIndicator.value,g=i.count.value-1,w=u===0&&c?g:u-1,x=u===g&&c?0:u+1;return o=a.value===u||a.value===w||a.value===x,o}),f=c=>{n.offset=c};return ve(()=>{ae(()=>{n.mounted=!0})}),ce({setOffset:f}),()=>{var c;return d("div",{class:qn(),style:s.value},[r.value?(c=t.default)==null?void 0:c.call(t):null])}}});const Qn=q(Jn);function eo(){const e=te({show:!1}),t=i=>{e.show=i},o=i=>{Q(e,i,{transitionAppear:!0}),t(!0)},n=()=>t(!1);return ce({open:o,close:n,toggle:t}),{open:o,close:n,state:e,toggle:t}}function to(e){const t=Rt(e),o=document.createElement("div");return document.body.appendChild(o),{instance:t.mount(o),unmount(){t.unmount(),document.body.removeChild(o)}}}const[no,de]=K("image"),oo={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:p,height:p,radius:p,lazyLoad:Boolean,iconSize:p,showError:z,errorIcon:_("photo-fail"),iconPrefix:String,showLoading:z,loadingIcon:_("photo"),crossorigin:String,referrerpolicy:String};var ao=W({name:no,props:oo,emits:["load","error"],setup(e,{emit:t,slots:o}){const n=I(!1),i=I(!0),a=I(),{$Lazyload:s}=ge().proxy,r=R(()=>{const m={width:j(e.width),height:j(e.height)};return ne(e.radius)&&(m.overflow="hidden",m.borderRadius=j(e.radius)),m});Y(()=>e.src,()=>{n.value=!1,i.value=!0});const f=m=>{i.value&&(i.value=!1,t("load",m))},c=()=>{const m=new Event("load");Object.defineProperty(m,"target",{value:a.value,enumerable:!0}),f(m)},l=m=>{n.value=!0,i.value=!1,t("error",m)},u=(m,A,L)=>L?L():d(oe,{name:m,size:e.iconSize,class:A,classPrefix:e.iconPrefix},null),g=()=>{if(i.value&&e.showLoading)return d("div",{class:de("loading")},[u(e.loadingIcon,de("loading-icon"),o.loading)]);if(n.value&&e.showError)return d("div",{class:de("error")},[u(e.errorIcon,de("error-icon"),o.error)])},w=()=>{if(n.value||!e.src)return;const m={alt:e.alt,class:de("img"),style:{objectFit:e.fit,objectPosition:e.position},crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy};return e.lazyLoad?Ce(d("img",ie({ref:a},m),null),[[pt("lazy"),e.src]]):d("img",ie({ref:a,src:e.src,onLoad:f,onError:l},m),null)},x=({el:m})=>{const A=()=>{m===a.value&&i.value&&c()};a.value?A():ae(A)},$=({el:m})=>{m===a.value&&!n.value&&l()};return s&&Ne&&(s.$on("loaded",x),s.$on("error",$),De(()=>{s.$off("loaded",x),s.$off("error",$)})),ve(()=>{ae(()=>{var m;(m=a.value)!=null&&m.complete&&!e.lazyLoad&&c()})}),()=>{var m;return d("div",{class:de({round:e.round,block:e.block}),style:r.value},[w(),g(),(m=o.default)==null?void 0:m.call(o)])}}});const Bt=q(ao),it=e=>Math.sqrt((e[0].clientX-e[1].clientX)**2+(e[0].clientY-e[1].clientY)**2),io=e=>({x:(e[0].clientX+e[1].clientX)/2,y:(e[0].clientY+e[1].clientY)/2}),Le=K("image-preview")[1],lt=2.6,lo={src:String,show:Boolean,active:Number,minZoom:we(p),maxZoom:we(p),rootWidth:we(Number),rootHeight:we(Number),disableZoom:Boolean,doubleScale:Boolean,closeOnClickImage:Boolean,closeOnClickOverlay:Boolean,vertical:Boolean};var ro=W({props:lo,emits:["scale","close","longPress"],setup(e,{emit:t,slots:o}){const n=te({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,initializing:!1,imageRatio:0}),i=Ze(),a=I(),s=I(),r=I(!1),f=I(!1);let c=0;const l=R(()=>{const{scale:h,moveX:b,moveY:E,moving:U,zooming:Z,initializing:y}=n,k={transitionDuration:Z||U||y?"0s":".3s"};return(h!==1||f.value)&&(k.transform=`matrix(${h}, 0, 0, ${h}, ${b}, ${E})`),k}),u=R(()=>{if(n.imageRatio){const{rootWidth:h,rootHeight:b}=e,E=r.value?b/n.imageRatio:h;return Math.max(0,(n.scale*E-h)/2)}return 0}),g=R(()=>{if(n.imageRatio){const{rootWidth:h,rootHeight:b}=e,E=r.value?b:h*n.imageRatio;return Math.max(0,(n.scale*E-b)/2)}return 0}),w=(h,b)=>{var E;if(h=J(h,+e.minZoom,+e.maxZoom+1),h!==n.scale){const U=h/n.scale;if(n.scale=h,b){const Z=ht((E=a.value)==null?void 0:E.$el),y={x:Z.width*.5,y:Z.height*.5},k=n.moveX-(b.x-Z.left-y.x)*(U-1),D=n.moveY-(b.y-Z.top-y.y)*(U-1);n.moveX=J(k,-u.value,u.value),n.moveY=J(D,-g.value,g.value)}else n.moveX=0,n.moveY=f.value?c:0;t("scale",{scale:h,index:e.active})}},x=()=>{w(1)},$=()=>{const h=n.scale>1?1:2;w(h,h===2||f.value?{x:i.startX.value,y:i.startY.value}:void 0)};let m,A,L,S,F,O,P,X,v=!1;const C=h=>{const{touches:b}=h;if(m=b.length,m===2&&e.disableZoom)return;const{offsetX:E}=i;i.start(h),A=n.moveX,L=n.moveY,X=Date.now(),v=!1,n.moving=m===1&&(n.scale!==1||f.value),n.zooming=m===2&&!E.value,n.zooming&&(S=n.scale,F=it(b))},T=h=>{const{touches:b}=h;if(i.move(h),n.moving){const{deltaX:E,deltaY:U}=i,Z=E.value+A,y=U.value+L;if((e.vertical?i.isVertical()&&Math.abs(y)>g.value:i.isHorizontal()&&Math.abs(Z)>u.value)&&!v){n.moving=!1;return}v=!0,se(h,!0),n.moveX=J(Z,-u.value,u.value),n.moveY=J(y,-g.value,g.value)}if(n.zooming&&(se(h,!0),b.length===2)){const E=it(b),U=S*E/F;O=io(b),w(U,O)}},B=h=>{var b;const E=(b=s.value)==null?void 0:b.$el;if(!E)return;const U=E.firstElementChild,Z=h.target===E,y=U==null?void 0:U.contains(h.target);!e.closeOnClickImage&&y||!e.closeOnClickOverlay&&Z||t("close")},N=h=>{if(m>1)return;const b=Date.now()-X,E=250;i.isTap.value&&(b<E?e.doubleScale?P?(clearTimeout(P),P=null,$()):P=setTimeout(()=>{B(h),P=null},E):B(h):b>un&&t("longPress"))},V=h=>{let b=!1;if((n.moving||n.zooming)&&(b=!0,n.moving&&A===n.moveX&&L===n.moveY&&(b=!1),!h.touches.length)){n.zooming&&(n.moveX=J(n.moveX,-u.value,u.value),n.moveY=J(n.moveY,-g.value,g.value),n.zooming=!1),n.moving=!1,A=0,L=0,S=1,n.scale<1&&x();const E=+e.maxZoom;n.scale>E&&w(E,O)}se(h,b),N(h),i.reset()},le=()=>{const{rootWidth:h,rootHeight:b}=e,E=b/h,{imageRatio:U}=n;r.value=n.imageRatio>E&&U<lt,f.value=n.imageRatio>E&&U>=lt,f.value&&(c=(U*h-b)/2,n.moveY=c,n.initializing=!0,Fe(()=>{n.initializing=!1})),x()},re=h=>{const{naturalWidth:b,naturalHeight:E}=h.target;n.imageRatio=E/b,le()};return Y(()=>e.active,x),Y(()=>e.show,h=>{h||x()}),Y(()=>[e.rootWidth,e.rootHeight],le),Re("touchmove",T,{target:R(()=>{var h;return(h=s.value)==null?void 0:h.$el})}),ce({resetScale:x}),()=>{const h={loading:()=>d(Ve,{type:"spinner"},null)};return d(Qn,{ref:s,class:Le("swipe-item"),onTouchstartPassive:C,onTouchend:V,onTouchcancel:V},{default:()=>[o.image?d("div",{class:Le("image-wrap")},[o.image({src:e.src,onLoad:re,style:l.value})]):d(Bt,{ref:a,src:e.src,fit:"contain",class:Le("image",{vertical:r.value}),style:l.value,onLoad:re},h)]})}}});const[so,fe]=K("image-preview"),co=["show","teleport","transition","overlayStyle","closeOnPopstate"],uo={show:Boolean,loop:z,images:mt(),minZoom:ee(1/3),maxZoom:ee(3),overlay:z,vertical:Boolean,closeable:Boolean,showIndex:z,className:Te,closeIcon:_("clear"),transition:String,beforeClose:Function,doubleScale:z,overlayClass:Te,overlayStyle:Object,swipeDuration:ee(300),startPosition:ee(0),showIndicators:Boolean,closeOnPopstate:z,closeOnClickImage:z,closeOnClickOverlay:z,closeIconPosition:_("top-right"),teleport:[String,Object]};var kt=W({name:so,props:uo,emits:["scale","close","closed","change","longPress","update:show"],setup(e,{emit:t,slots:o}){const n=I(),i=I(),a=te({active:0,rootWidth:0,rootHeight:0,disableZoom:!1}),s=()=>{if(n.value){const S=ht(n.value.$el);a.rootWidth=S.width,a.rootHeight=S.height,n.value.resize()}},r=S=>t("scale",S),f=S=>t("update:show",S),c=()=>{je(e.beforeClose,{args:[a.active],done:()=>f(!1)})},l=S=>{S!==a.active&&(a.active=S,t("change",S))},u=()=>{if(e.showIndex)return d("div",{class:fe("index")},[o.index?o.index({index:a.active}):`${a.active+1} / ${e.images.length}`])},g=()=>{if(o.cover)return d("div",{class:fe("cover")},[o.cover()])},w=()=>{a.disableZoom=!0},x=()=>{a.disableZoom=!1},$=()=>d(Kn,{ref:n,lazyRender:!0,loop:e.loop,class:fe("swipe"),vertical:e.vertical,duration:e.swipeDuration,initialSwipe:e.startPosition,showIndicators:e.showIndicators,indicatorColor:"white",onChange:l,onDragEnd:x,onDragStart:w},{default:()=>[e.images.map((S,F)=>d(ro,{ref:O=>{F===a.active&&(i.value=O)},src:S,show:e.show,active:a.active,maxZoom:e.maxZoom,minZoom:e.minZoom,rootWidth:a.rootWidth,rootHeight:a.rootHeight,disableZoom:a.disableZoom,doubleScale:e.doubleScale,closeOnClickImage:e.closeOnClickImage,closeOnClickOverlay:e.closeOnClickOverlay,vertical:e.vertical,onScale:r,onClose:c,onLongPress:()=>t("longPress",{index:F})},{image:o.image}))]}),m=()=>{if(e.closeable)return d(oe,{role:"button",name:e.closeIcon,class:[fe("close-icon",e.closeIconPosition),xt],onClick:c},null)},A=()=>t("closed"),L=(S,F)=>{var O;return(O=n.value)==null?void 0:O.swipeTo(S,F)};return ce({resetScale:()=>{var S;(S=i.value)==null||S.resetScale()},swipeTo:L}),ve(s),Y([wt,bt],s),Y(()=>e.startPosition,S=>l(+S)),Y(()=>e.show,S=>{const{images:F,startPosition:O}=e;S?(l(+O),ae(()=>{s(),L(+O,{immediate:!0})})):t("close",{index:a.active,url:F[a.active]})}),()=>d(Zn,ie({class:[fe(),e.className],overlayClass:[fe("overlay"),e.overlayClass],onClosed:A,"onUpdate:show":f},ye(e,co)),{default:()=>[m(),$(),u(),g()]})}});let Oe;const fo={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,vertical:!1,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,doubleScale:!0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeOnClickOverlay:!0,closeIconPosition:"top-right"};function vo(){({instance:Oe}=to({setup(){const{state:e,toggle:t}=eo(),o=()=>{e.images=[]};return()=>d(kt,ie(e,{onClosed:o,"onUpdate:show":t}),null)}}))}const go=(e,t=0)=>{if(Ne)return Oe||vo(),e=Array.isArray(e)?{images:e,startPosition:t}:e,Oe.open(Q({},fo,e)),Oe};q(kt);const[mo,M,ho]=K("uploader");function rt(e,t){return new Promise(o=>{if(t==="file"){o();return}const n=new FileReader;n.onload=i=>{o(i.target.result)},t==="dataUrl"?n.readAsDataURL(e):t==="text"&&n.readAsText(e)})}function zt(e,t){return gt(e).some(o=>o.file?ze(t)?t(o.file):o.file.size>+t:!1)}function yo(e,t){const o=[],n=[];return e.forEach(i=>{zt(i,t)?n.push(i):o.push(i)}),{valid:o,invalid:n}}const wo=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg|avif)/i,bo=e=>wo.test(e);function Tt(e){return e.isImage?!0:e.file&&e.file.type?e.file.type.indexOf("image")===0:e.url?bo(e.url):typeof e.content=="string"?e.content.indexOf("data:image")===0:!1}var Co=W({props:{name:p,item:we(Object),index:Number,imageFit:String,lazyLoad:Boolean,deletable:Boolean,reupload:Boolean,previewSize:[Number,String,Array],beforeDelete:Function},emits:["delete","preview","reupload"],setup(e,{emit:t,slots:o}){const n=()=>{const{status:l,message:u}=e.item;if(l==="uploading"||l==="failed"){const g=l==="failed"?d(oe,{name:"close",class:M("mask-icon")},null):d(Ve,{class:M("loading")},null),w=ne(u)&&u!=="";return d("div",{class:M("mask")},[g,w&&d("div",{class:M("mask-message")},[u])])}},i=l=>{const{name:u,item:g,index:w,beforeDelete:x}=e;l.stopPropagation(),je(x,{args:[g,{name:u,index:w}],done:()=>t("delete")})},a=()=>t("preview"),s=()=>t("reupload"),r=()=>{if(e.deletable&&e.item.status!=="uploading"){const l=o["preview-delete"];return d("div",{role:"button",class:M("preview-delete",{shadow:!l}),tabindex:0,"aria-label":ho("delete"),onClick:i},[l?l():d(oe,{name:"cross",class:M("preview-delete-icon")},null)])}},f=()=>{if(o["preview-cover"]){const{index:l,item:u}=e;return d("div",{class:M("preview-cover")},[o["preview-cover"](Q({index:l},u))])}},c=()=>{const{item:l,lazyLoad:u,imageFit:g,previewSize:w,reupload:x}=e;return Tt(l)?d(Bt,{fit:g,src:l.objectUrl||l.content||l.url,class:M("preview-image"),width:Array.isArray(w)?w[0]:w,height:Array.isArray(w)?w[1]:w,lazyLoad:u,onClick:x?s:a},{default:f}):d("div",{class:M("file"),style:Xe(e.previewSize)},[d(oe,{class:M("file-icon"),name:"description"},null),d("div",{class:[M("file-name"),"van-ellipsis"]},[l.file?l.file.name:l.url]),f()])};return()=>d("div",{class:M("preview")},[c(),n(),r()])}});const So={name:ee(""),accept:_("image/*"),capture:String,multiple:Boolean,disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,maxCount:ee(1/0),imageFit:_("cover"),resultType:_("dataUrl"),uploadIcon:_("photograph"),uploadText:String,deletable:z,reupload:Boolean,afterRead:Function,showUpload:z,modelValue:mt(),beforeRead:Function,beforeDelete:Function,previewSize:[Number,String,Array],previewImage:z,previewOptions:Object,previewFullImage:z,maxSize:{type:[Number,String,Function],default:1/0}};var xo=W({name:mo,props:So,emits:["delete","oversize","clickUpload","closePreview","clickPreview","clickReupload","update:modelValue"],setup(e,{emit:t,slots:o}){const n=I(),i=[],a=I(-1),s=I(!1),r=(v=e.modelValue.length)=>({name:e.name,index:v}),f=()=>{n.value&&(n.value.value="")},c=v=>{if(f(),zt(v,e.maxSize))if(Array.isArray(v)){const C=yo(v,e.maxSize);if(v=C.valid,t("oversize",C.invalid,r()),!v.length)return}else{t("oversize",v,r());return}if(v=te(v),a.value>-1){const C=[...e.modelValue];C.splice(a.value,1,v),t("update:modelValue",C),a.value=-1}else t("update:modelValue",[...e.modelValue,...gt(v)]);e.afterRead&&e.afterRead(v,r())},l=v=>{const{maxCount:C,modelValue:T,resultType:B}=e;if(Array.isArray(v)){const N=+C-T.length;v.length>N&&(v=v.slice(0,N)),Promise.all(v.map(V=>rt(V,B))).then(V=>{const le=v.map((re,h)=>{const b={file:re,status:"",message:"",objectUrl:URL.createObjectURL(re)};return V[h]&&(b.content=V[h]),b});c(le)})}else rt(v,B).then(N=>{const V={file:v,status:"",message:"",objectUrl:URL.createObjectURL(v)};N&&(V.content=N),c(V)})},u=v=>{const{files:C}=v.target;if(e.disabled||!C||!C.length)return;const T=C.length===1?C[0]:[].slice.call(C);if(e.beforeRead){const B=e.beforeRead(T,r());if(!B){f();return}if(ft(B)){B.then(N=>{l(N||T)}).catch(f);return}}l(T)};let g;const w=()=>t("closePreview"),x=v=>{if(e.previewFullImage){const C=e.modelValue.filter(Tt),T=C.map(B=>(B.objectUrl&&!B.url&&B.status!=="failed"&&(B.url=B.objectUrl,i.push(B.url)),B.url)).filter(Boolean);g=go(Q({images:T,startPosition:C.indexOf(v),onClose:w},e.previewOptions))}},$=()=>{g&&g.close()},m=(v,C)=>{const T=e.modelValue.slice(0);T.splice(C,1),t("update:modelValue",T),t("delete",v,r(C))},A=v=>{s.value=!0,a.value=v,ae(()=>X())},L=()=>{s.value||(a.value=-1),s.value=!1},S=(v,C)=>{const T=["imageFit","deletable","reupload","previewSize","beforeDelete"],B=Q(ye(e,T),ye(v,T,!0));return d(Co,ie({item:v,index:C,onClick:()=>t(e.reupload?"clickReupload":"clickPreview",v,r(C)),onDelete:()=>m(v,C),onPreview:()=>x(v),onReupload:()=>A(C)},ye(e,["name","lazyLoad"]),B),ye(o,["preview-cover","preview-delete"]))},F=()=>{if(e.previewImage)return e.modelValue.map(S)},O=v=>t("clickUpload",v),P=()=>{const v=e.modelValue.length<+e.maxCount,C=e.readonly?null:d("input",{ref:n,type:"file",class:M("input"),accept:e.accept,capture:e.capture,multiple:e.multiple&&a.value===-1,disabled:e.disabled,onChange:u,onClick:L},null);return o.default?Ce(d("div",{class:M("input-wrapper"),onClick:O},[o.default(),C]),[[ke,v]]):Ce(d("div",{class:M("upload",{readonly:e.readonly}),style:Xe(e.previewSize),onClick:O},[d(oe,{name:e.uploadIcon,class:M("upload-icon")},null),e.uploadText&&d("span",{class:M("upload-text")},[e.uploadText]),C]),[[ke,e.showUpload&&v]])},X=()=>{n.value&&!e.disabled&&n.value.click()};return De(()=>{i.forEach(v=>URL.revokeObjectURL(v))}),ce({chooseFile:X,reuploadFile:A,closeImagePreview:$}),Gt(()=>e.modelValue),()=>d("div",{class:M()},[d("div",{class:M("wrapper",{disabled:e.disabled})},[F(),P()])])}});const Oo=q(xo);export{Po as B,Oo as U};
