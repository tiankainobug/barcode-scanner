import{z as $e,w as L,r as S,u as Oe,A as lt,B as pe,C as $t,s as ee,a as fe,l as oe,D as Me,c as A,E as rt,k as be,G as pt,d as K,i as u,H as ae,o as Ae,T as st,I as ct,f as ye,v as Be,F as At,J as Tt,K as Dt}from"./index-Wf1-Thzh.js";function Rt(){}const te=Object.assign,Ye=typeof window<"u",Ne=e=>e!==null&&typeof e=="object",ne=e=>e!=null,ke=e=>typeof e=="function",ut=e=>Ne(e)&&ke(e.then)&&ke(e.catch),dt=e=>typeof e=="number"||/^\d+(\.\d+)?$/.test(e),_t=()=>Ye?/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase()):!1;function Ve(e,t){const o=t.split(".");let n=e;return o.forEach(i=>{var a;n=Ne(n)&&(a=n[i])!=null?a:""}),n}function me(e,t,o){return t.reduce((n,i)=>((!o||e[i]!==void 0)&&(n[i]=e[i]),n),{})}const ft=e=>Array.isArray(e)?e:[e],ze=null,D=[Number,String],z={type:Boolean,default:!0},he=e=>({type:e,required:!0}),vt=()=>({type:Array,default:()=>[]}),Q=e=>({type:D,default:e}),X=e=>({type:String,default:e});var Ce=typeof window<"u";function Le(e){return Ce?requestAnimationFrame(e):-1}function Ee(e){Le(()=>Le(e))}var Lt=e=>e===window,Ze=(e,t)=>({top:0,left:0,right:e,bottom:t,width:e,height:t}),gt=e=>{const t=Oe(e);if(Lt(t)){const o=t.innerWidth,n=t.innerHeight;return Ze(o,n)}return t!=null&&t.getBoundingClientRect?t.getBoundingClientRect():Ze(0,0)};function Ft(e){const t=$e(e,null);if(t){const o=be(),{link:n,unlink:i,internalChildren:a}=t;n(o),lt(()=>i(o));const s=A(()=>a.indexOf(o));return{parent:t,index:s}}return{parent:null,index:S(-1)}}function Mt(e){const t=[],o=n=>{Array.isArray(n)&&n.forEach(i=>{var a;pt(i)&&(t.push(i),(a=i.component)!=null&&a.subTree&&(t.push(i.component.subTree),o(i.component.subTree.children)),i.children&&o(i.children))})};return o(e),t}var He=(e,t)=>{const o=e.indexOf(t);return o===-1?e.findIndex(n=>t.key!==void 0&&t.key!==null&&n.type===t.type&&n.key===t.key):o};function Yt(e,t,o){const n=Mt(e.subTree.children);o.sort((a,s)=>He(n,a.vnode)-He(n,s.vnode));const i=o.map(a=>a.proxy);t.sort((a,s)=>{const r=i.indexOf(a),d=i.indexOf(s);return r-d})}function Nt(e){const t=ee([]),o=ee([]),n=be();return{children:t,linkChildren:a=>{rt(e,Object.assign({link:d=>{d.proxy&&(o.push(d),t.push(d.proxy),Yt(n,t,o))},unlink:d=>{const f=o.indexOf(d);t.splice(f,1),o.splice(f,1)},children:t,internalChildren:o},a))}}}function mt(e){let t;fe(()=>{e(),oe(()=>{t=!0})}),Me(()=>{t&&e()})}function Te(e,t,o={}){if(!Ce)return;const{target:n=window,passive:i=!1,capture:a=!1}=o;let s=!1,r;const d=c=>{if(s)return;const m=Oe(c);m&&!r&&(m.addEventListener(e,t,{capture:a,passive:i}),r=!0)},f=c=>{if(s)return;const m=Oe(c);m&&r&&(m.removeEventListener(e,t,a),r=!1)};lt(()=>f(n)),pe(()=>f(n)),mt(()=>d(n));let l;return $t(n)&&(l=L(n,(c,m)=>{f(m),d(c)})),()=>{l==null||l(),f(n),s=!0}}var Ie,Re;function Ut(){if(!Ie&&(Ie=S(0),Re=S(0),Ce)){const e=()=>{Ie.value=window.innerWidth,Re.value=window.innerHeight};e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("orientationchange",e,{passive:!0})}return{width:Ie,height:Re}}var Xt=/scroll|auto|overlay/i,jt=Ce?window:void 0;function Vt(e){return e.tagName!=="HTML"&&e.tagName!=="BODY"&&e.nodeType===1}function Zt(e,t=jt){let o=e;for(;o&&o!==t&&Vt(o);){const{overflowY:n}=window.getComputedStyle(o);if(Xt.test(n))return o;o=o.parentNode}return t}var Se;function Ht(){if(!Se&&(Se=S("visible"),Ce)){const e=()=>{Se.value=document.hidden?"hidden":"visible"};e(),window.addEventListener("visibilitychange",e)}return Se}var Wt=Symbol("van-field");function Kt(e){const t=$e(Wt,null);t&&!t.customValue.value&&(t.customValue.value=e,L(e,()=>{t.resetValidation(),t.validateWithTrigger("onChange")}))}_t();const Gt=e=>e.stopPropagation();function de(e,t){(typeof e.cancelable!="boolean"||e.cancelable)&&e.preventDefault(),t&&Gt(e)}function We(e){const t=Oe(e);if(!t)return!1;const o=window.getComputedStyle(t),n=o.display==="none",i=t.offsetParent===null&&o.position!=="fixed";return n||i}const{width:ht,height:wt}=Ut();function j(e){if(ne(e))return dt(e)?`${e}px`:String(e)}function Ue(e){if(ne(e)){if(Array.isArray(e))return{width:j(e[0]),height:j(e[1])};const t=j(e);return{width:t,height:t}}}function qt(e){const t={};return e!==void 0&&(t.zIndex=+e),t}const Jt=/-(\w)/g,yt=e=>e.replace(Jt,(t,o)=>o.toUpperCase()),q=(e,t,o)=>Math.min(Math.max(e,t),o),{hasOwnProperty:Qt}=Object.prototype;function en(e,t,o){const n=t[o];ne(n)&&(!Qt.call(e,o)||!Ne(n)?e[o]=n:e[o]=bt(Object(e[o]),n))}function bt(e,t){return Object.keys(t).forEach(o=>{en(e,t,o)}),e}var tn={name:"姓名",tel:"电话",save:"保存",clear:"清空",cancel:"取消",confirm:"确认",delete:"删除",loading:"加载中...",noCoupon:"暂无优惠券",nameEmpty:"请填写姓名",addContact:"添加联系人",telInvalid:"请填写正确的电话",vanCalendar:{end:"结束",start:"开始",title:"日期选择",weekdays:["日","一","二","三","四","五","六"],monthTitle:(e,t)=>`${e}年${t}月`,rangePrompt:e=>`最多选择 ${e} 天`},vanCascader:{select:"请选择"},vanPagination:{prev:"上一页",next:"下一页"},vanPullRefresh:{pulling:"下拉即可刷新...",loosing:"释放即可刷新..."},vanSubmitBar:{label:"合计:"},vanCoupon:{unlimited:"无门槛",discount:e=>`${e}折`,condition:e=>`满${e}元可用`},vanCouponCell:{title:"优惠券",count:e=>`${e}张可用`},vanCouponList:{exchange:"兑换",close:"不使用",enable:"可用",disabled:"不可用",placeholder:"输入优惠码"},vanAddressEdit:{area:"地区",areaEmpty:"请选择地区",addressEmpty:"请填写详细地址",addressDetail:"详细地址",defaultAddress:"设为默认收货地址"},vanAddressList:{add:"新增地址"}};const Ke=S("zh-CN"),Ge=ee({"zh-CN":tn}),nn={messages(){return Ge[Ke.value]},use(e,t){Ke.value=e,this.add({[e]:t})},add(e={}){bt(Ge,e)}};var on=nn;function an(e){const t=yt(e)+".";return(o,...n)=>{const i=on.messages(),a=Ve(i,t+o)||Ve(i,o);return ke(a)?a(...n):a}}function Fe(e,t){return t?typeof t=="string"?` ${e}--${t}`:Array.isArray(t)?t.reduce((o,n)=>o+Fe(e,n),""):Object.keys(t).reduce((o,n)=>o+(t[n]?Fe(e,n):""),""):""}function ln(e){return(t,o)=>(t&&typeof t!="string"&&(o=t,t=""),t=t?`${e}__${t}`:e,`${t}${Fe(t,o)}`)}function G(e){const t=`van-${e}`;return[t,ln(t),an(t)]}const rn="van-hairline",ho=`${rn}--surround`,Ct="van-haptics-feedback",sn=500,qe=5;function Xe(e,{args:t=[],done:o,canceled:n,error:i}){if(e){const a=e.apply(null,t);ut(a)?a.then(s=>{s?o():n&&n()}).catch(i||Rt):a?o():n&&n()}else o()}function J(e){return e.install=t=>{const{name:o}=e;o&&(t.component(o,e),t.component(yt(`-${o}`),e))},e}const Et=Symbol();function cn(e){const t=$e(Et,null);t&&L(t,o=>{o&&e()})}function se(e){const t=be();t&&te(t.proxy,e)}const[un,Je]=G("badge"),dn={dot:Boolean,max:D,tag:X("div"),color:String,offset:Array,content:D,showZero:z,position:X("top-right")};var fn=K({name:un,props:dn,setup(e,{slots:t}){const o=()=>{if(t.content)return!0;const{content:r,showZero:d}=e;return ne(r)&&r!==""&&(d||r!==0&&r!=="0")},n=()=>{const{dot:r,max:d,content:f}=e;if(!r&&o())return t.content?t.content():ne(d)&&dt(f)&&+f>+d?`${d}+`:f},i=r=>r.startsWith("-")?r.replace("-",""):`-${r}`,a=A(()=>{const r={background:e.color};if(e.offset){const[d,f]=e.offset,{position:l}=e,[c,m]=l.split("-");t.default?(typeof f=="number"?r[c]=j(c==="top"?f:-f):r[c]=c==="top"?j(f):i(f),typeof d=="number"?r[m]=j(m==="left"?d:-d):r[m]=m==="left"?j(d):i(d)):(r.marginTop=j(f),r.marginLeft=j(d))}return r}),s=()=>{if(o()||e.dot)return u("div",{class:Je([e.position,{dot:e.dot,fixed:!!t.default}]),style:a.value},[n()])};return()=>{if(t.default){const{tag:r}=e;return u(r,{class:Je("wrapper")},{default:()=>[t.default(),s()]})}return s()}}});const vn=J(fn);let gn=2e3;const mn=()=>++gn,[hn,wo]=G("config-provider"),wn=Symbol(hn),[yn,Qe]=G("icon"),bn=e=>e==null?void 0:e.includes("/"),Cn={dot:Boolean,tag:X("i"),name:String,size:D,badge:D,color:String,badgeProps:Object,classPrefix:String};var En=K({name:yn,props:Cn,setup(e,{slots:t}){const o=$e(wn,null),n=A(()=>e.classPrefix||(o==null?void 0:o.iconPrefix)||Qe());return()=>{const{tag:i,dot:a,name:s,size:r,badge:d,color:f}=e,l=bn(s);return u(vn,ae({dot:a,tag:i,class:[n.value,l?"":`${n.value}-${s}`],style:{color:f,fontSize:j(r)},content:d},e.badgeProps),{default:()=>{var c;return[(c=t.default)==null?void 0:c.call(t),l&&u("img",{class:Qe("image"),src:s},null)]}})}}});const re=J(En),[In,we]=G("loading"),Sn=Array(12).fill(null).map((e,t)=>u("i",{class:we("line",String(t+1))},null)),xn=u("svg",{class:we("circular"),viewBox:"25 25 50 50"},[u("circle",{cx:"50",cy:"50",r:"20",fill:"none"},null)]),Pn={size:D,type:X("circular"),color:String,vertical:Boolean,textSize:D,textColor:String};var On=K({name:In,props:Pn,setup(e,{slots:t}){const o=A(()=>te({color:e.color},Ue(e.size))),n=()=>{const a=e.type==="spinner"?Sn:xn;return u("span",{class:we("spinner",e.type),style:o.value},[t.icon?t.icon():a])},i=()=>{var a;if(t.default)return u("span",{class:we("text"),style:{fontSize:j(e.textSize),color:(a=e.textColor)!=null?a:e.color}},[t.default()])};return()=>{const{type:a,vertical:s}=e;return u("div",{class:we([a,{vertical:s}]),"aria-live":"polite","aria-busy":!0},[n(),i()])}}});const It=J(On),Bn={show:Boolean,zIndex:D,overlay:z,duration:D,teleport:[String,Object],lockScroll:z,lazyRender:z,beforeClose:Function,overlayStyle:Object,overlayClass:ze,transitionAppear:Boolean,closeOnClickOverlay:z};function kn(e,t){return e>t?"horizontal":t>e?"vertical":""}function je(){const e=S(0),t=S(0),o=S(0),n=S(0),i=S(0),a=S(0),s=S(""),r=S(!0),d=()=>s.value==="vertical",f=()=>s.value==="horizontal",l=()=>{o.value=0,n.value=0,i.value=0,a.value=0,s.value="",r.value=!0};return{move:y=>{const P=y.touches[0];o.value=(P.clientX<0?0:P.clientX)-e.value,n.value=P.clientY-t.value,i.value=Math.abs(o.value),a.value=Math.abs(n.value);const T=10;(!s.value||i.value<T&&a.value<T)&&(s.value=kn(i.value,a.value)),r.value&&(i.value>qe||a.value>qe)&&(r.value=!1)},start:y=>{l(),e.value=y.touches[0].clientX,t.value=y.touches[0].clientY},reset:l,startX:e,startY:t,deltaX:o,deltaY:n,offsetX:i,offsetY:a,direction:s,isVertical:d,isHorizontal:f,isTap:r}}let ge=0;const et="van-overflow-hidden";function zn(e,t){const o=je(),n="01",i="10",a=l=>{o.move(l);const c=o.deltaY.value>0?i:n,m=Zt(l.target,e.value),{scrollHeight:y,offsetHeight:P,scrollTop:T}=m;let h="11";T===0?h=P>=y?"00":"01":T+P>=y&&(h="10"),h!=="11"&&o.isVertical()&&!(parseInt(h,2)&parseInt(c,2))&&de(l,!0)},s=()=>{document.addEventListener("touchstart",o.start),document.addEventListener("touchmove",a,{passive:!1}),ge||document.body.classList.add(et),ge++},r=()=>{ge&&(document.removeEventListener("touchstart",o.start),document.removeEventListener("touchmove",a),ge--,ge||document.body.classList.remove(et))},d=()=>t()&&s(),f=()=>t()&&r();mt(d),pe(f),Ae(f),L(t,l=>{l?s():r()})}function St(e){const t=S(!1);return L(e,o=>{o&&(t.value=o)},{immediate:!0}),o=>()=>t.value?o():null}const tt=()=>{var e;const{scopeId:t}=((e=be())==null?void 0:e.vnode)||{};return t?{[t]:""}:null},[$n,pn]=G("overlay"),An={show:Boolean,zIndex:D,duration:D,className:ze,lockScroll:z,lazyRender:z,customStyle:Object,teleport:[String,Object]};var Tn=K({name:$n,props:An,setup(e,{slots:t}){const o=S(),n=St(()=>e.show||!e.lazyRender),i=s=>{e.lockScroll&&de(s,!0)},a=n(()=>{var s;const r=te(qt(e.zIndex),e.customStyle);return ne(e.duration)&&(r.animationDuration=`${e.duration}s`),ye(u("div",{ref:o,style:r,class:[pn(),e.className]},[(s=t.default)==null?void 0:s.call(t)]),[[Be,e.show]])});return Te("touchmove",i,{target:o}),()=>{const s=u(st,{name:"van-fade",appear:!0},{default:a});return e.teleport?u(ct,{to:e.teleport},{default:()=>[s]}):s}}});const Dn=J(Tn),Rn=te({},Bn,{round:Boolean,position:X("center"),closeIcon:X("cross"),closeable:Boolean,transition:String,iconPrefix:String,closeOnPopstate:Boolean,closeIconPosition:X("top-right"),safeAreaInsetTop:Boolean,safeAreaInsetBottom:Boolean}),[_n,nt]=G("popup");var Ln=K({name:_n,inheritAttrs:!1,props:Rn,emits:["open","close","opened","closed","keydown","update:show","clickOverlay","clickCloseIcon"],setup(e,{emit:t,attrs:o,slots:n}){let i,a;const s=S(),r=S(),d=St(()=>e.show||!e.lazyRender),f=A(()=>{const x={zIndex:s.value};if(ne(e.duration)){const U=e.position==="center"?"animationDuration":"transitionDuration";x[U]=`${e.duration}s`}return x}),l=()=>{i||(i=!0,s.value=e.zIndex!==void 0?+e.zIndex:mn(),t("open"))},c=()=>{i&&Xe(e.beforeClose,{done(){i=!1,t("close"),t("update:show",!1)}})},m=x=>{t("clickOverlay",x),e.closeOnClickOverlay&&c()},y=()=>{if(e.overlay)return u(Dn,ae({show:e.show,class:e.overlayClass,zIndex:s.value,duration:e.duration,customStyle:e.overlayStyle,role:e.closeOnClickOverlay?"button":void 0,tabindex:e.closeOnClickOverlay?0:void 0},tt(),{onClick:m}),{default:n["overlay-content"]})},P=x=>{t("clickCloseIcon",x),c()},T=()=>{if(e.closeable)return u(re,{role:"button",tabindex:0,name:e.closeIcon,class:[nt("close-icon",e.closeIconPosition),Ct],classPrefix:e.iconPrefix,onClick:P},null)};let h;const R=()=>{h&&clearTimeout(h),h=setTimeout(()=>{t("opened")})},Y=()=>t("closed"),E=x=>t("keydown",x),N=d(()=>{var x;const{round:U,position:v,safeAreaInsetTop:C,safeAreaInsetBottom:$}=e;return ye(u("div",ae({ref:r,style:f.value,role:"dialog",tabindex:0,class:[nt({round:U,[v]:v}),{"van-safe-area-top":C,"van-safe-area-bottom":$}],onKeydown:E},o,tt()),[(x=n.default)==null?void 0:x.call(n),T()]),[[Be,e.show]])}),O=()=>{const{position:x,transition:U,transitionAppear:v}=e,C=x==="center"?"van-fade":`van-popup-slide-${x}`;return u(st,{name:U||C,appear:v,onAfterEnter:R,onAfterLeave:Y},{default:N})};return L(()=>e.show,x=>{x&&!i&&(l(),o.tabindex===0&&oe(()=>{var U;(U=r.value)==null||U.focus()})),!x&&i&&(i=!1,t("close"))}),se({popupRef:r}),zn(r,()=>e.show&&e.lockScroll),Te("popstate",()=>{e.closeOnPopstate&&(c(),a=!1)}),fe(()=>{e.show&&l()}),Me(()=>{a&&(t("update:show",!0),a=!1)}),pe(()=>{e.show&&e.teleport&&(c(),a=!0)}),rt(Et,()=>e.show),()=>e.teleport?u(ct,{to:e.teleport},{default:()=>[y(),O()]}):u(At,null,[y(),O()])}});const Fn=J(Ln),[xt,xe]=G("swipe"),Mn={loop:z,width:D,height:D,vertical:Boolean,autoplay:Q(0),duration:Q(500),touchable:z,lazyRender:Boolean,initialSwipe:Q(0),indicatorColor:String,showIndicators:z,stopPropagation:z},Pt=Symbol(xt);var Yn=K({name:xt,props:Mn,emits:["change","dragStart","dragEnd"],setup(e,{emit:t,slots:o}){const n=S(),i=S(),a=ee({rect:null,width:0,height:0,offset:0,active:0,swiping:!1});let s=!1;const r=je(),{children:d,linkChildren:f}=Nt(Pt),l=A(()=>d.length),c=A(()=>a[e.vertical?"height":"width"]),m=A(()=>e.vertical?r.deltaY.value:r.deltaX.value),y=A(()=>a.rect?(e.vertical?a.rect.height:a.rect.width)-c.value*l.value:0),P=A(()=>c.value?Math.ceil(Math.abs(y.value)/c.value):l.value),T=A(()=>l.value*c.value),h=A(()=>(a.active+l.value)%l.value),R=A(()=>{const w=e.vertical?"vertical":"horizontal";return r.direction.value===w}),Y=A(()=>{const w={transitionDuration:`${a.swiping?0:e.duration}ms`,transform:`translate${e.vertical?"Y":"X"}(${+a.offset.toFixed(2)}px)`};if(c.value){const k=e.vertical?"height":"width",p=e.vertical?"width":"height";w[k]=`${T.value}px`,w[p]=e[p]?`${e[p]}px`:""}return w}),E=w=>{const{active:k}=a;return w?e.loop?q(k+w,-1,l.value):q(k+w,0,P.value):k},N=(w,k=0)=>{let p=w*c.value;e.loop||(p=Math.min(p,-y.value));let W=k-p;return e.loop||(W=q(W,y.value,0)),W},O=({pace:w=0,offset:k=0,emitChange:p})=>{if(l.value<=1)return;const{active:W}=a,H=E(w),ve=N(H,k);if(e.loop){if(d[0]&&ve!==y.value){const De=ve<y.value;d[0].setOffset(De?T.value:0)}if(d[l.value-1]&&ve!==0){const De=ve>0;d[l.value-1].setOffset(De?-T.value:0)}}a.active=H,a.offset=ve,p&&H!==W&&t("change",h.value)},x=()=>{a.swiping=!0,a.active<=-1?O({pace:l.value}):a.active>=l.value&&O({pace:-l.value})},U=()=>{x(),r.reset(),Ee(()=>{a.swiping=!1,O({pace:-1,emitChange:!0})})},v=()=>{x(),r.reset(),Ee(()=>{a.swiping=!1,O({pace:1,emitChange:!0})})};let C;const $=()=>clearTimeout(C),B=()=>{$(),+e.autoplay>0&&l.value>1&&(C=setTimeout(()=>{v(),B()},+e.autoplay))},F=(w=+e.initialSwipe)=>{if(!n.value)return;const k=()=>{var p,W;if(!We(n)){const H={width:n.value.offsetWidth,height:n.value.offsetHeight};a.rect=H,a.width=+((p=e.width)!=null?p:H.width),a.height=+((W=e.height)!=null?W:H.height)}l.value&&(w=Math.min(l.value-1,w),w===-1&&(w=l.value-1)),a.active=w,a.swiping=!0,a.offset=N(w),d.forEach(H=>{H.setOffset(0)}),B()};We(n)?oe().then(k):k()},V=()=>F(a.active);let ie;const le=w=>{!e.touchable||w.touches.length>1||(r.start(w),s=!1,ie=Date.now(),$(),x())},g=w=>{e.touchable&&a.swiping&&(r.move(w),R.value&&(!e.loop&&(a.active===0&&m.value>0||a.active===l.value-1&&m.value<0)||(de(w,e.stopPropagation),O({offset:m.value}),s||(t("dragStart",{index:h.value}),s=!0))))},b=()=>{if(!e.touchable||!a.swiping)return;const w=Date.now()-ie,k=m.value/w;if((Math.abs(k)>.25||Math.abs(m.value)>c.value/2)&&R.value){const W=e.vertical?r.offsetY.value:r.offsetX.value;let H=0;e.loop?H=W>0?m.value>0?-1:1:0:H=-Math[m.value>0?"ceil":"floor"](m.value/c.value),O({pace:H,emitChange:!0})}else m.value&&O({pace:0});s=!1,a.swiping=!1,t("dragEnd",{index:h.value}),B()},I=(w,k={})=>{x(),r.reset(),Ee(()=>{let p;e.loop&&w===l.value?p=a.active===0?0:w:p=w%l.value,k.immediate?Ee(()=>{a.swiping=!1}):a.swiping=!1,O({pace:p-a.active,emitChange:!0})})},M=(w,k)=>{const p=k===h.value,W=p?{backgroundColor:e.indicatorColor}:void 0;return u("i",{style:W,class:xe("indicator",{active:p})},null)},Z=()=>{if(o.indicator)return o.indicator({active:h.value,total:l.value});if(e.showIndicators&&l.value>1)return u("div",{class:xe("indicators",{vertical:e.vertical})},[Array(l.value).fill("").map(M)])};return se({prev:U,next:v,state:a,resize:V,swipeTo:I}),f({size:c,props:e,count:l,activeIndicator:h}),L(()=>e.initialSwipe,w=>F(+w)),L(l,()=>F(a.active)),L(()=>e.autoplay,B),L([ht,wt,()=>e.width,()=>e.height],V),L(Ht(),w=>{w==="visible"?B():$()}),fe(F),Me(()=>F(a.active)),cn(()=>F(a.active)),pe($),Ae($),Te("touchmove",g,{target:i}),()=>{var w;return u("div",{ref:n,class:xe()},[u("div",{ref:i,style:Y.value,class:xe("track",{vertical:e.vertical}),onTouchstartPassive:le,onTouchend:b,onTouchcancel:b},[(w=o.default)==null?void 0:w.call(o)]),Z()])}}});const Nn=J(Yn),[Un,Xn]=G("swipe-item");var jn=K({name:Un,setup(e,{slots:t}){let o;const n=ee({offset:0,inited:!1,mounted:!1}),{parent:i,index:a}=Ft(Pt);if(!i)return;const s=A(()=>{const f={},{vertical:l}=i.props;return i.size.value&&(f[l?"height":"width"]=`${i.size.value}px`),n.offset&&(f.transform=`translate${l?"Y":"X"}(${n.offset}px)`),f}),r=A(()=>{const{loop:f,lazyRender:l}=i.props;if(!l||o)return!0;if(!n.mounted)return!1;const c=i.activeIndicator.value,m=i.count.value-1,y=c===0&&f?m:c-1,P=c===m&&f?0:c+1;return o=a.value===c||a.value===y||a.value===P,o}),d=f=>{n.offset=f};return fe(()=>{oe(()=>{n.mounted=!0})}),se({setOffset:d}),()=>{var f;return u("div",{class:Xn(),style:s.value},[r.value?(f=t.default)==null?void 0:f.call(t):null])}}});const Vn=J(jn);function Zn(){const e=ee({show:!1}),t=i=>{e.show=i},o=i=>{te(e,i,{transitionAppear:!0}),t(!0)},n=()=>t(!1);return se({open:o,close:n,toggle:t}),{open:o,close:n,state:e,toggle:t}}function Hn(e){const t=Tt(e),o=document.createElement("div");return document.body.appendChild(o),{instance:t.mount(o),unmount(){t.unmount(),document.body.removeChild(o)}}}const[Wn,ce]=G("image"),Kn={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:D,height:D,radius:D,lazyLoad:Boolean,iconSize:D,showError:z,errorIcon:X("photo-fail"),iconPrefix:String,showLoading:z,loadingIcon:X("photo"),crossorigin:String,referrerpolicy:String};var Gn=K({name:Wn,props:Kn,emits:["load","error"],setup(e,{emit:t,slots:o}){const n=S(!1),i=S(!0),a=S(),{$Lazyload:s}=be().proxy,r=A(()=>{const h={width:j(e.width),height:j(e.height)};return ne(e.radius)&&(h.overflow="hidden",h.borderRadius=j(e.radius)),h});L(()=>e.src,()=>{n.value=!1,i.value=!0});const d=h=>{i.value&&(i.value=!1,t("load",h))},f=()=>{const h=new Event("load");Object.defineProperty(h,"target",{value:a.value,enumerable:!0}),d(h)},l=h=>{n.value=!0,i.value=!1,t("error",h)},c=(h,R,Y)=>Y?Y():u(re,{name:h,size:e.iconSize,class:R,classPrefix:e.iconPrefix},null),m=()=>{if(i.value&&e.showLoading)return u("div",{class:ce("loading")},[c(e.loadingIcon,ce("loading-icon"),o.loading)]);if(n.value&&e.showError)return u("div",{class:ce("error")},[c(e.errorIcon,ce("error-icon"),o.error)])},y=()=>{if(n.value||!e.src)return;const h={alt:e.alt,class:ce("img"),style:{objectFit:e.fit,objectPosition:e.position},crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy};return e.lazyLoad?ye(u("img",ae({ref:a},h),null),[[Dt("lazy"),e.src]]):u("img",ae({ref:a,src:e.src,onLoad:d,onError:l},h),null)},P=({el:h})=>{const R=()=>{h===a.value&&i.value&&f()};a.value?R():oe(R)},T=({el:h})=>{h===a.value&&!n.value&&l()};return s&&Ye&&(s.$on("loaded",P),s.$on("error",T),Ae(()=>{s.$off("loaded",P),s.$off("error",T)})),fe(()=>{oe(()=>{var h;(h=a.value)!=null&&h.complete&&!e.lazyLoad&&f()})}),()=>{var h;return u("div",{class:ce({round:e.round,block:e.block}),style:r.value},[y(),m(),(h=o.default)==null?void 0:h.call(o)])}}});const Ot=J(Gn),ot=e=>Math.sqrt((e[0].clientX-e[1].clientX)**2+(e[0].clientY-e[1].clientY)**2),qn=e=>({x:(e[0].clientX+e[1].clientX)/2,y:(e[0].clientY+e[1].clientY)/2}),_e=G("image-preview")[1],at=2.6,Jn={src:String,show:Boolean,active:Number,minZoom:he(D),maxZoom:he(D),rootWidth:he(Number),rootHeight:he(Number),disableZoom:Boolean,doubleScale:Boolean,closeOnClickImage:Boolean,closeOnClickOverlay:Boolean,vertical:Boolean};var Qn=K({props:Jn,emits:["scale","close","longPress"],setup(e,{emit:t,slots:o}){const n=ee({scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,initializing:!1,imageRatio:0}),i=je(),a=S(),s=S(),r=S(!1),d=S(!1);let f=0;const l=A(()=>{const{scale:g,moveX:b,moveY:I,moving:M,zooming:Z,initializing:w}=n,k={transitionDuration:Z||M||w?"0s":".3s"};return(g!==1||d.value)&&(k.transform=`matrix(${g}, 0, 0, ${g}, ${b}, ${I})`),k}),c=A(()=>{if(n.imageRatio){const{rootWidth:g,rootHeight:b}=e,I=r.value?b/n.imageRatio:g;return Math.max(0,(n.scale*I-g)/2)}return 0}),m=A(()=>{if(n.imageRatio){const{rootWidth:g,rootHeight:b}=e,I=r.value?b:g*n.imageRatio;return Math.max(0,(n.scale*I-b)/2)}return 0}),y=(g,b)=>{var I;if(g=q(g,+e.minZoom,+e.maxZoom+1),g!==n.scale){const M=g/n.scale;if(n.scale=g,b){const Z=gt((I=a.value)==null?void 0:I.$el),w={x:Z.width*.5,y:Z.height*.5},k=n.moveX-(b.x-Z.left-w.x)*(M-1),p=n.moveY-(b.y-Z.top-w.y)*(M-1);n.moveX=q(k,-c.value,c.value),n.moveY=q(p,-m.value,m.value)}else n.moveX=0,n.moveY=d.value?f:0;t("scale",{scale:g,index:e.active})}},P=()=>{y(1)},T=()=>{const g=n.scale>1?1:2;y(g,g===2||d.value?{x:i.startX.value,y:i.startY.value}:void 0)};let h,R,Y,E,N,O,x,U,v=!1;const C=g=>{const{touches:b}=g;if(h=b.length,h===2&&e.disableZoom)return;const{offsetX:I}=i;i.start(g),R=n.moveX,Y=n.moveY,U=Date.now(),v=!1,n.moving=h===1&&(n.scale!==1||d.value),n.zooming=h===2&&!I.value,n.zooming&&(E=n.scale,N=ot(b))},$=g=>{const{touches:b}=g;if(i.move(g),n.moving){const{deltaX:I,deltaY:M}=i,Z=I.value+R,w=M.value+Y;if((e.vertical?i.isVertical()&&Math.abs(w)>m.value:i.isHorizontal()&&Math.abs(Z)>c.value)&&!v){n.moving=!1;return}v=!0,de(g,!0),n.moveX=q(Z,-c.value,c.value),n.moveY=q(w,-m.value,m.value)}if(n.zooming&&(de(g,!0),b.length===2)){const I=ot(b),M=E*I/N;O=qn(b),y(M,O)}},B=g=>{var b;const I=(b=s.value)==null?void 0:b.$el;if(!I)return;const M=I.firstElementChild,Z=g.target===I,w=M==null?void 0:M.contains(g.target);!e.closeOnClickImage&&w||!e.closeOnClickOverlay&&Z||t("close")},F=g=>{if(h>1)return;const b=Date.now()-U,I=250;i.isTap.value&&(b<I?e.doubleScale?x?(clearTimeout(x),x=null,T()):x=setTimeout(()=>{B(g),x=null},I):B(g):b>sn&&t("longPress"))},V=g=>{let b=!1;if((n.moving||n.zooming)&&(b=!0,n.moving&&R===n.moveX&&Y===n.moveY&&(b=!1),!g.touches.length)){n.zooming&&(n.moveX=q(n.moveX,-c.value,c.value),n.moveY=q(n.moveY,-m.value,m.value),n.zooming=!1),n.moving=!1,R=0,Y=0,E=1,n.scale<1&&P();const I=+e.maxZoom;n.scale>I&&y(I,O)}de(g,b),F(g),i.reset()},ie=()=>{const{rootWidth:g,rootHeight:b}=e,I=b/g,{imageRatio:M}=n;r.value=n.imageRatio>I&&M<at,d.value=n.imageRatio>I&&M>=at,d.value&&(f=(M*g-b)/2,n.moveY=f,n.initializing=!0,Le(()=>{n.initializing=!1})),P()},le=g=>{const{naturalWidth:b,naturalHeight:I}=g.target;n.imageRatio=I/b,ie()};return L(()=>e.active,P),L(()=>e.show,g=>{g||P()}),L(()=>[e.rootWidth,e.rootHeight],ie),Te("touchmove",$,{target:A(()=>{var g;return(g=s.value)==null?void 0:g.$el})}),se({resetScale:P}),()=>{const g={loading:()=>u(It,{type:"spinner"},null)};return u(Vn,{ref:s,class:_e("swipe-item"),onTouchstartPassive:C,onTouchend:V,onTouchcancel:V},{default:()=>[o.image?u("div",{class:_e("image-wrap")},[o.image({src:e.src,onLoad:le,style:l.value})]):u(Ot,{ref:a,src:e.src,fit:"contain",class:_e("image",{vertical:r.value}),style:l.value,onLoad:le},g)]})}}});const[eo,ue]=G("image-preview"),to=["show","teleport","transition","overlayStyle","closeOnPopstate"],no={show:Boolean,loop:z,images:vt(),minZoom:Q(1/3),maxZoom:Q(3),overlay:z,vertical:Boolean,closeable:Boolean,showIndex:z,className:ze,closeIcon:X("clear"),transition:String,beforeClose:Function,doubleScale:z,overlayClass:ze,overlayStyle:Object,swipeDuration:Q(300),startPosition:Q(0),showIndicators:Boolean,closeOnPopstate:z,closeOnClickImage:z,closeOnClickOverlay:z,closeIconPosition:X("top-right"),teleport:[String,Object]};var Bt=K({name:eo,props:no,emits:["scale","close","closed","change","longPress","update:show"],setup(e,{emit:t,slots:o}){const n=S(),i=S(),a=ee({active:0,rootWidth:0,rootHeight:0,disableZoom:!1}),s=()=>{if(n.value){const E=gt(n.value.$el);a.rootWidth=E.width,a.rootHeight=E.height,n.value.resize()}},r=E=>t("scale",E),d=E=>t("update:show",E),f=()=>{Xe(e.beforeClose,{args:[a.active],done:()=>d(!1)})},l=E=>{E!==a.active&&(a.active=E,t("change",E))},c=()=>{if(e.showIndex)return u("div",{class:ue("index")},[o.index?o.index({index:a.active}):`${a.active+1} / ${e.images.length}`])},m=()=>{if(o.cover)return u("div",{class:ue("cover")},[o.cover()])},y=()=>{a.disableZoom=!0},P=()=>{a.disableZoom=!1},T=()=>u(Nn,{ref:n,lazyRender:!0,loop:e.loop,class:ue("swipe"),vertical:e.vertical,duration:e.swipeDuration,initialSwipe:e.startPosition,showIndicators:e.showIndicators,indicatorColor:"white",onChange:l,onDragEnd:P,onDragStart:y},{default:()=>[e.images.map((E,N)=>u(Qn,{ref:O=>{N===a.active&&(i.value=O)},src:E,show:e.show,active:a.active,maxZoom:e.maxZoom,minZoom:e.minZoom,rootWidth:a.rootWidth,rootHeight:a.rootHeight,disableZoom:a.disableZoom,doubleScale:e.doubleScale,closeOnClickImage:e.closeOnClickImage,closeOnClickOverlay:e.closeOnClickOverlay,vertical:e.vertical,onScale:r,onClose:f,onLongPress:()=>t("longPress",{index:N})},{image:o.image}))]}),h=()=>{if(e.closeable)return u(re,{role:"button",name:e.closeIcon,class:[ue("close-icon",e.closeIconPosition),Ct],onClick:f},null)},R=()=>t("closed"),Y=(E,N)=>{var O;return(O=n.value)==null?void 0:O.swipeTo(E,N)};return se({resetScale:()=>{var E;(E=i.value)==null||E.resetScale()},swipeTo:Y}),fe(s),L([ht,wt],s),L(()=>e.startPosition,E=>l(+E)),L(()=>e.show,E=>{const{images:N,startPosition:O}=e;E?(l(+O),oe(()=>{s(),Y(+O,{immediate:!0})})):t("close",{index:a.active,url:N[a.active]})}),()=>u(Fn,ae({class:[ue(),e.className],overlayClass:[ue("overlay"),e.overlayClass],onClosed:R,"onUpdate:show":d},me(e,to)),{default:()=>[h(),T(),c(),m()]})}});let Pe;const oo={loop:!0,images:[],maxZoom:3,minZoom:1/3,onScale:void 0,onClose:void 0,onChange:void 0,vertical:!1,teleport:"body",className:"",showIndex:!0,closeable:!1,closeIcon:"clear",transition:void 0,beforeClose:void 0,doubleScale:!0,overlayStyle:void 0,overlayClass:void 0,startPosition:0,swipeDuration:300,showIndicators:!1,closeOnPopstate:!0,closeOnClickOverlay:!0,closeIconPosition:"top-right"};function ao(){({instance:Pe}=Hn({setup(){const{state:e,toggle:t}=Zn(),o=()=>{e.images=[]};return()=>u(Bt,ae(e,{onClosed:o,"onUpdate:show":t}),null)}}))}const io=(e,t=0)=>{if(Ye)return Pe||ao(),e=Array.isArray(e)?{images:e,startPosition:t}:e,Pe.open(te({},oo,e)),Pe};J(Bt);const[lo,_,ro]=G("uploader");function it(e,t){return new Promise(o=>{if(t==="file"){o();return}const n=new FileReader;n.onload=i=>{o(i.target.result)},t==="dataUrl"?n.readAsDataURL(e):t==="text"&&n.readAsText(e)})}function kt(e,t){return ft(e).some(o=>o.file?ke(t)?t(o.file):o.file.size>+t:!1)}function so(e,t){const o=[],n=[];return e.forEach(i=>{kt(i,t)?n.push(i):o.push(i)}),{valid:o,invalid:n}}const co=/\.(jpeg|jpg|gif|png|svg|webp|jfif|bmp|dpg|avif)/i,uo=e=>co.test(e);function zt(e){return e.isImage?!0:e.file&&e.file.type?e.file.type.indexOf("image")===0:e.url?uo(e.url):typeof e.content=="string"?e.content.indexOf("data:image")===0:!1}var fo=K({props:{name:D,item:he(Object),index:Number,imageFit:String,lazyLoad:Boolean,deletable:Boolean,reupload:Boolean,previewSize:[Number,String,Array],beforeDelete:Function},emits:["delete","preview","reupload"],setup(e,{emit:t,slots:o}){const n=()=>{const{status:l,message:c}=e.item;if(l==="uploading"||l==="failed"){const m=l==="failed"?u(re,{name:"close",class:_("mask-icon")},null):u(It,{class:_("loading")},null),y=ne(c)&&c!=="";return u("div",{class:_("mask")},[m,y&&u("div",{class:_("mask-message")},[c])])}},i=l=>{const{name:c,item:m,index:y,beforeDelete:P}=e;l.stopPropagation(),Xe(P,{args:[m,{name:c,index:y}],done:()=>t("delete")})},a=()=>t("preview"),s=()=>t("reupload"),r=()=>{if(e.deletable&&e.item.status!=="uploading"){const l=o["preview-delete"];return u("div",{role:"button",class:_("preview-delete",{shadow:!l}),tabindex:0,"aria-label":ro("delete"),onClick:i},[l?l():u(re,{name:"cross",class:_("preview-delete-icon")},null)])}},d=()=>{if(o["preview-cover"]){const{index:l,item:c}=e;return u("div",{class:_("preview-cover")},[o["preview-cover"](te({index:l},c))])}},f=()=>{const{item:l,lazyLoad:c,imageFit:m,previewSize:y,reupload:P}=e;return zt(l)?u(Ot,{fit:m,src:l.objectUrl||l.content||l.url,class:_("preview-image"),width:Array.isArray(y)?y[0]:y,height:Array.isArray(y)?y[1]:y,lazyLoad:c,onClick:P?s:a},{default:d}):u("div",{class:_("file"),style:Ue(e.previewSize)},[u(re,{class:_("file-icon"),name:"description"},null),u("div",{class:[_("file-name"),"van-ellipsis"]},[l.file?l.file.name:l.url]),d()])};return()=>u("div",{class:_("preview")},[f(),n(),r()])}});const vo={name:Q(""),accept:X("image/*"),capture:String,multiple:Boolean,disabled:Boolean,readonly:Boolean,lazyLoad:Boolean,maxCount:Q(1/0),imageFit:X("cover"),resultType:X("dataUrl"),uploadIcon:X("photograph"),uploadText:String,deletable:z,reupload:Boolean,afterRead:Function,showUpload:z,modelValue:vt(),beforeRead:Function,beforeDelete:Function,previewSize:[Number,String,Array],previewImage:z,previewOptions:Object,previewFullImage:z,maxSize:{type:[Number,String,Function],default:1/0}};var go=K({name:lo,props:vo,emits:["delete","oversize","clickUpload","closePreview","clickPreview","clickReupload","update:modelValue"],setup(e,{emit:t,slots:o}){const n=S(),i=[],a=S(-1),s=S(!1),r=(v=e.modelValue.length)=>({name:e.name,index:v}),d=()=>{n.value&&(n.value.value="")},f=v=>{if(d(),kt(v,e.maxSize))if(Array.isArray(v)){const C=so(v,e.maxSize);if(v=C.valid,t("oversize",C.invalid,r()),!v.length)return}else{t("oversize",v,r());return}if(v=ee(v),a.value>-1){const C=[...e.modelValue];C.splice(a.value,1,v),t("update:modelValue",C),a.value=-1}else t("update:modelValue",[...e.modelValue,...ft(v)]);e.afterRead&&e.afterRead(v,r())},l=v=>{const{maxCount:C,modelValue:$,resultType:B}=e;if(Array.isArray(v)){const F=+C-$.length;v.length>F&&(v=v.slice(0,F)),Promise.all(v.map(V=>it(V,B))).then(V=>{const ie=v.map((le,g)=>{const b={file:le,status:"",message:"",objectUrl:URL.createObjectURL(le)};return V[g]&&(b.content=V[g]),b});f(ie)})}else it(v,B).then(F=>{const V={file:v,status:"",message:"",objectUrl:URL.createObjectURL(v)};F&&(V.content=F),f(V)})},c=v=>{const{files:C}=v.target;if(e.disabled||!C||!C.length)return;const $=C.length===1?C[0]:[].slice.call(C);if(e.beforeRead){const B=e.beforeRead($,r());if(!B){d();return}if(ut(B)){B.then(F=>{l(F||$)}).catch(d);return}}l($)};let m;const y=()=>t("closePreview"),P=v=>{if(e.previewFullImage){const C=e.modelValue.filter(zt),$=C.map(B=>(B.objectUrl&&!B.url&&B.status!=="failed"&&(B.url=B.objectUrl,i.push(B.url)),B.url)).filter(Boolean);m=io(te({images:$,startPosition:C.indexOf(v),onClose:y},e.previewOptions))}},T=()=>{m&&m.close()},h=(v,C)=>{const $=e.modelValue.slice(0);$.splice(C,1),t("update:modelValue",$),t("delete",v,r(C))},R=v=>{s.value=!0,a.value=v,oe(()=>U())},Y=()=>{s.value||(a.value=-1),s.value=!1},E=(v,C)=>{const $=["imageFit","deletable","reupload","previewSize","beforeDelete"],B=te(me(e,$),me(v,$,!0));return u(fo,ae({item:v,index:C,onClick:()=>t(e.reupload?"clickReupload":"clickPreview",v,r(C)),onDelete:()=>h(v,C),onPreview:()=>P(v),onReupload:()=>R(C)},me(e,["name","lazyLoad"]),B),me(o,["preview-cover","preview-delete"]))},N=()=>{if(e.previewImage)return e.modelValue.map(E)},O=v=>t("clickUpload",v),x=()=>{const v=e.modelValue.length<+e.maxCount,C=e.readonly?null:u("input",{ref:n,type:"file",class:_("input"),accept:e.accept,capture:e.capture,multiple:e.multiple&&a.value===-1,disabled:e.disabled,onChange:c,onClick:Y},null);return o.default?ye(u("div",{class:_("input-wrapper"),onClick:O},[o.default(),C]),[[Be,v]]):ye(u("div",{class:_("upload",{readonly:e.readonly}),style:Ue(e.previewSize),onClick:O},[u(re,{name:e.uploadIcon,class:_("upload-icon")},null),e.uploadText&&u("span",{class:_("upload-text")},[e.uploadText]),C]),[[Be,e.showUpload&&v]])},U=()=>{n.value&&!e.disabled&&n.value.click()};return Ae(()=>{i.forEach(v=>URL.revokeObjectURL(v))}),se({chooseFile:U,reuploadFile:R,closeImagePreview:T}),Kt(()=>e.modelValue),()=>u("div",{class:_()},[u("div",{class:_("wrapper",{disabled:e.disabled})},[N(),x()])])}});const yo=J(go);export{ho as B,re as I,It as L,yo as U,G as c,te as e,X as m,D as n,de as p,J as w};
