(window.webpackJsonp=window.webpackJsonp||[]).push([["app"],{0:function(e,t,c){e.exports=c("cd49")},2955:function(e,t,c){"use strict";c("bca8")},"6b0d":function(e,t,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>{const c=e.__vccOpts||e;for(const[e,l]of t)c[e]=l;return c}},9963:function(e,t,c){"use strict";function l(e,t){void 0===t&&(t=e.constructor);var c=Error.captureStackTrace;c&&c(e,t)}c.d(t,"a",(function(){return i}));var a,n=(a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var c in t)Object.prototype.hasOwnProperty.call(t,c)&&(e[c]=t[c])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function c(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(c.prototype=t.prototype,new c)}),i=function(e){function t(t,c){var a,n,i,o=this.constructor,u=e.call(this,t,c)||this;return Object.defineProperty(u,"name",{value:o.name,enumerable:!1,configurable:!0}),a=u,n=o.prototype,(i=Object.setPrototypeOf)?i(a,n):a.__proto__=n,l(u),u}return n(t,e),t}(Error)},"9ae4":function(e,t,c){},b20f:function(e,t,c){},b910:function(e,t,c){"use strict";c("9ae4")},bca8:function(e,t,c){},c8ba:function(e,t){var c;c=function(){return this}();try{c=c||new Function("return this")()}catch(e){"object"==typeof window&&(c=window)}e.exports=c},cd49:function(e,t,c){"use strict";c.r(t);var l=c("7a23");var a=c("6b0d"),n=c.n(a);const i={};var o=n()(i,[["render",function(e,t){const c=Object(l.C)("router-view");return Object(l.v)(),Object(l.h)("div",null,[Object(l.l)(c,null,{default:Object(l.J)(({Component:e})=>[(Object(l.v)(),Object(l.f)(l.b,null,[(Object(l.v)(),Object(l.f)(Object(l.D)(e)))],1024))]),_:1})])}]]),u=c("6605"),r=c("224f");const v=e=>(Object(l.y)("data-v-28c66874"),e=e(),Object(l.w)(),e),s={class:"video-container"},d={class:"videoBox"},b={key:0,class:"loading"},O=Object(l.j)('<svg class="svg" width="100%" height="100%" data-v-28c66874><mask id="mask" data-v-28c66874><rect x="0" y="0" width="100%" height="100%" style="stroke:none;fill:#fff;" data-v-28c66874></rect><rect width="200" height="200" x="50%" y="50%" rx="10" ry="10" transform="translate(-100, -170)" style="fill:#000;" data-v-28c66874></rect></mask><rect x="0" y="0" width="100%" height="100%" style="stroke:none;fill:rgba(0, 0, 0, 0.6);" mask="url(#mask)" data-v-28c66874></rect></svg>',1),j={class:"back-container"},m=Object(l.k)(),p=v(()=>Object(l.i)("div",null,"扫码",-1));var f=Object(l.m)({props:{deviceId:null},emits:["cameraQRcode","getCameraList","updatedDeviceID","close"],setup(e,{emit:t}){const c=e,a=Object(l.A)(null),n=Object(l.A)(!1),i=Object(l.A)(!0),o=Object(l.A)(""),u=Object(l.A)(null),v=async()=>{var e;u.value=new r.BrowserMultiFormatReader,null===(e=u.value)||void 0===e||e.listVideoInputDevices().then(e=>{var l,i,r,v;if(""!==c.deviceId){const t=e.find(e=>"videoinput"===e.kind&&e.deviceId.toLowerCase()===c.deviceId.toLowerCase());o.value=null!==(l=null==t?void 0:t.deviceId)&&void 0!==l?l:""}else{const t=e.filter(e=>"videoinput"===e.kind&&e.label.toLowerCase().includes("back")),c=e.filter(e=>"videoinput"===e.kind&&e.label.includes("后置"));t.length>0?t.length>=4?o.value=null!==(i=t[2].deviceId)&&void 0!==i?i:"":o.value=null!==(r=t[t.length-1].deviceId)&&void 0!==r?r:"":c.length>0?o.value=null!==(v=c[0].deviceId)&&void 0!==v?v:"":o.value=e[e.length-1].deviceId}t("getCameraList",e),t("updatedDeviceID",o.value),((e,c)=>{null==e||e.decodeFromVideoDevice(c,"video",(c,l)=>{c&&(a.value&&a.value.pause(),n.value||(n.value=!0,setTimeout(()=>{n.value&&(t("cameraQRcode",c),e&&e.reset())},500)))})})(u.value,o.value)}).catch(e=>{console.error(e,"开启错误")})};return Object(l.t)(()=>{navigator.mediaDevices.getUserMedia({video:{facingMode:{exact:"environment"}}}).then(e=>{e.getTracks().forEach(e=>e.stop()),v()}).catch(e=>{alert("禁止打开摄像头"+e),t("close")})}),Object(l.u)(()=>{u.value&&u.value.reset()}),(e,c)=>(Object(l.v)(),Object(l.h)("div",s,[Object(l.i)("div",d,[i.value?(Object(l.v)(),Object(l.h)("div",b," loading... ")):Object(l.g)("",!0),Object(l.i)("video",{id:"video",ref_key:"videoDom",ref:a,class:"video",autoplay:""},null,512),O]),Object(l.i)("div",j,[Object(l.i)("div",{class:"back",onClick:c[0]||(c[0]=e=>t("close"))}," 返回 "),m,p])]))}});c("2955");var h=n()(f,[["__scopeId","data-v-28c66874"]]);const g={class:"box"},k={class:"qr_result"},w=Object(l.i)("div",null," 以下是扫描结果 ",-1),y={class:"mt-5"},_={class:"mt-5"},C={class:"mt-5"},F={class:"mt-5"},x={class:"mt-5"},I={class:"mt-5"},D={class:"mt-5"},T=["id","value"];var A=Object(l.m)({setup(e){const t=Object(l.A)(""),c=Object(l.A)(!1),a=Object(l.A)([]),n=Object(l.A)(null),i=e=>{n.value=e,c.value=!1},o=e=>{a.value=e},u=e=>{t.value=e};return(e,r)=>{var v,s,d,b,O,j,m,p,f,A,M;return Object(l.v)(),Object(l.h)(l.a,null,[Object(l.i)("div",g,[Object(l.i)("button",{class:"qr_btn",onClick:r[0]||(r[0]=e=>c.value=!0)}," 点击扫描二维码 "),Object(l.i)("div",k,[w,Object(l.i)("div",y," 二维码条内容: "+Object(l.F)(null!==(s=null===(v=n.value)||void 0===v?void 0:v.getText())&&void 0!==s?s:null),1),Object(l.i)("div",_," 原始字节码由条形码编码 : "+Object(l.F)(null!==(b=null===(d=n.value)||void 0===d?void 0:d.getRawBytes())&&void 0!==b?b:null),1),Object(l.i)("div",C," 图片中与条形码相关的点 : "+Object(l.F)(null!==(j=null===(O=n.value)||void 0===O?void 0:O.getResultPoints())&&void 0!==j?j:null),1),Object(l.i)("div",F," 已解码条形码格式: "+Object(l.F)(null!==(p=null===(m=n.value)||void 0===m?void 0:m.getBarcodeFormat())&&void 0!==p?p:null),1),Object(l.i)("div",x," Timestamp: "+Object(l.F)(null!==(A=null===(f=n.value)||void 0===f?void 0:f.getTimestamp())&&void 0!==A?A:null),1),Object(l.i)("div",I," 已解码的二维码的元数据: "+Object(l.F)(null===(M=n.value)||void 0===M?void 0:M.getResultMetadata()),1),Object(l.i)("div",D," 摄像机列表: "+Object(l.F)(a.value.length),1),(Object(l.v)(!0),Object(l.h)(l.a,null,Object(l.B)(a.value,(e,c)=>(Object(l.v)(),Object(l.h)("div",{key:c,class:"mt-2 flex items-center"},[Object(l.K)(Object(l.i)("input",{id:e.label,"onUpdate:modelValue":r[1]||(r[1]=e=>t.value=e),class:"mr-2",type:"radio",name:"cameralist",value:e.deviceId},null,8,T),[[l.H,t.value]]),Object(l.k)(Object(l.F)(e.label),1)]))),128))])]),Object(l.l)(l.c,{name:"move"},{default:Object(l.J)(()=>[c.value?(Object(l.v)(),Object(l.f)(h,{key:0,"device-id":t.value,onUpdatedDeviceID:u,onCameraQRcode:i,onGetCameraList:o,onClose:r[2]||(r[2]=e=>c.value=!1)},null,8,["device-id"])):Object(l.g)("",!0)]),_:1})],64)}}});c("b910");var M=A;const R=Object(l.i)("br",null,null,-1),E=Object(l.i)("br",null,null,-1);const B=[{path:"/",name:"home",component:Object(l.m)({setup(e){const t=Object(l.A)(new r.BrowserMultiFormatReader),c=Object(l.A)(null),a=Object(l.A)(null),n=Object(l.z)({metamask:!1,bitkeep:!1,imToken:!1,coinbase:!1});Object(l.t)(async()=>{var e,t,c,l;n.metamask=null!==(e=window.ethereum.isMetaMask)&&void 0!==e&&e,n.bitkeep=null!==(t=window.isBitKeep)&&void 0!==t&&t,n.imToken=null!==(c=window.imToken)&&void 0!==c&&c,n.coinbase=null!==(l=window.ethereum.isCoinbaseWallet)&&void 0!==l&&l,console.log(n)});const i=()=>{navigator.mediaDevices.getUserMedia({video:{facingMode:{exact:"environment"},width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:60,max:120}}}).then(e=>{console.log(e)})},o=async()=>{try{a.value=await navigator.mediaDevices.getUserMedia({video:{facingMode:{exact:"environment"},width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:60,max:120},advanced:[{focusMode:"continuous"}]}}),console.log(a.value),c.value.srcObject=a.value,t.value.decodeFromStream(a.value,c.value,e=>{console.log(e),e&&(alert(e),c.value&&c.value.pause(),t.value&&t.value.reset())})}catch(e){console.error(e)}},u=()=>{a.value&&a.value.getTracks().forEach(e=>e.stop()),a.value=null,t.value.stopContinuousDecode()};return(e,t)=>(Object(l.v)(),Object(l.h)("div",null,[Object(l.i)("video",{ref_key:"videoElement",ref:c,autoplay:""},null,512),Object(l.i)("button",{onClick:o}," Start Camera1 "),R,Object(l.i)("button",{onClick:u}," Stop Camera "),E,Object(l.i)("button",{onClick:i}," test "),Object(l.i)("div",null," imToken "+Object(l.F)(Object(l.G)(n).imToken),1),Object(l.i)("div",null," metamask "+Object(l.F)(Object(l.G)(n).metamask),1),Object(l.i)("div",null," bitkeep "+Object(l.F)(Object(l.G)(n).bitkeep),1),Object(l.i)("div",null," coinbase "+Object(l.F)(Object(l.G)(n).coinbase),1)]))}})},{path:"/test",name:"test",component:M}],L=Object(u.a)({history:Object(u.b)(),routes:B});L.afterEach(()=>{document.documentElement.scrollTop=0});var P=L;c("b20f");Object(l.e)(o).use(P).mount("#app")}},[[0,"runtime","npm.zxing","npm.vue","npm.vue-router"]]]);
//# sourceMappingURL=app.43845b3f.js.map